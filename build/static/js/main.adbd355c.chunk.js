(this["webpackJsonp@thanathos9558/stake-ui"]=this["webpackJsonp@thanathos9558/stake-ui"]||[]).push([[0],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(15),a=n(0),i=n(24),c=n(37),o=n.n(c),s=n(394),u=n(389),l=n(4),d=n(35),m=n(2);function p(e){var t=e.mint,n=e.decimals,c=e.variant,p=e.onChange,b=e.style,g=Object(i.c)((function(e){return t?e.common.ownedTokenAccounts.filter((function(e){return e.account.mint.toString()===t.toString()})):[]})),j=Object(a.useState)(""),y=Object(r.a)(j,2),f=y[0],h=y[1];return Object(m.jsx)(s.a,{style:b,variant:c,fullWidth:!0,value:f,onChange:function(e){var t=e.target.value;h(t);var n=new l.PublicKey(t),r=g.filter((function(e){return e.publicKey.equals(n)})).pop();p(n,new o.a(r.account.amount))},children:0===g.length?Object(m.jsx)(u.a,{value:"",children:"No token accounts found"}):g.map((function(e){return Object(m.jsx)(u.a,{value:e.publicKey.toString(),children:Object(m.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",overflow:"hidden"},children:[Object(m.jsx)("div",{children:"".concat(e.publicKey)}),n&&Object(m.jsx)("div",{style:{float:"right",color:"#ccc"},children:"".concat(Object(d.c)(e.account.amount,null!==n&&void 0!==n?n:0))})]})})}))})}},206:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={active:"#43a047",ready:"#3f51b5",notReady:"#ccc",inactive:"red",deactivating:"rgb(255, 121, 42)"};function a(){return r}},23:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.CommonTriggerBootstrap=0]="CommonTriggerBootstrap",e[e.CommonAppWillBootstrap=1]="CommonAppWillBootstrap",e[e.CommonAppDidBootstrap=2]="CommonAppDidBootstrap",e[e.CommonTriggerShutdown=3]="CommonTriggerShutdown",e[e.CommonDidShutdown=4]="CommonDidShutdown",e[e.CommonWalletDidConnect=5]="CommonWalletDidConnect",e[e.CommonWalletDidDisconnect=6]="CommonWalletDidDisconnect",e[e.CommonWalletSetProvider=7]="CommonWalletSetProvider",e[e.CommonSetNetwork=8]="CommonSetNetwork",e[e.CommonOwnedTokenAccountsSet=9]="CommonOwnedTokenAccountsSet",e[e.CommonOwnedTokenAccountsUpdate=10]="CommonOwnedTokenAccountsUpdate",e[e.CommonWalletReset=11]="CommonWalletReset",e[e.LockupSetVestings=12]="LockupSetVestings",e[e.LockupUpdateVesting=13]="LockupUpdateVesting",e[e.LockupCreateVesting=14]="LockupCreateVesting",e[e.RegistrySetMember=15]="RegistrySetMember",e[e.RegistrySetRegistrar=16]="RegistrySetRegistrar",e[e.RegistrySetPendingWithdrawals=17]="RegistrySetPendingWithdrawals",e[e.RegistryCreatePendingWithdrawal=18]="RegistryCreatePendingWithdrawal",e[e.RegistryUpdatePendingWithdrawal=19]="RegistryUpdatePendingWithdrawal",e[e.AccountAdd=20]="AccountAdd",e[e.AccountUpdate=21]="AccountUpdate"}(r||(r={}))},260:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return E}));var r=n(16),a=n(21),i=n(1),c=n.n(i),o=n(5),s=n(15),u=n(0),l=n(24),d=n(46),m=n(210),p=n(203),b=n.n(p),g=n(634),j=n(262),y=n(393),f=n(632),h=n(372),v=n.n(h),x=n(373),O=n.n(x),w=n(209),k=n(4),S=n(53),K=n(105),M=n(43),C=n(35),P=n(66),T=n(2);function A(e){var t=e.rewards,n=!1;return t.forEach((function(e){null===e&&(n=!0)})),Object(T.jsx)(g.a,{children:n?Object(T.jsx)(m.a,{style:{display:"block",marginLeft:"auto",marginRight:"auto"}}):t.length>0?t.filter((function(e){return!1===e.vendor.account.expired})).map((function(e){return Object(T.jsx)(R,{rli:e})})):Object(T.jsx)(j.a,{children:Object(T.jsx)(y.a,{primary:"No rewards found"})})})}function R(e){var t=e.rli,n=Object(u.useState)(!1),r=Object(s.a)(n,2),a=r[0],i=r[1],c=new Date(1e3*t.vendor.account.startTs.toNumber()).toLocaleString(),o="Dropped by ".concat(t.vendor.account.from.toString()," | ").concat(c);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(j.a,{button:!0,onClick:function(){return i((function(e){return!e}))},children:[Object(T.jsx)(b.a,{style:{visibility:t.reward.locked?"visible":"hidden",marginRight:"16px"}}),Object(T.jsx)(y.a,{primary:Object(T.jsx)("div",{style:{display:"flex",justifyContent:"space-between",color:t.needsClaim?"#54a15e":""},children:Object(T.jsx)("div",{children:"".concat(Object(C.c)(t.vendor.account.total,t.mint.account.decimals)," ").concat(t.mint.publicKey)})}),secondary:o}),a?Object(T.jsx)(v.a,{}):Object(T.jsx)(O.a,{})]}),Object(T.jsx)(f.a,{in:a,timeout:"auto",unmountOnExit:!0,children:void 0===t.vendor?Object(T.jsx)(m.a,{}):Object(T.jsx)(W,{vendor:t.vendor})})]})}function W(t){var n=t.vendor,r=Object(M.b)().registryClient,a=Object(d.b)(),i=a.enqueueSnackbar,m=a.closeSnackbar,p=Object(l.c)((function(e){return{registrar:e.registry.registrar,vendorMint:e.accounts[n.account.mint.toString()]}})),b=p.vendorMint,g=p.registrar,j=Object(u.useState)(null),y=Object(s.a)(j,2),f=y[0],h=y[1],v=function(){var t=Object(o.a)(c.a.mark((function t(){var a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i("Expiring reward",{variant:"info"}),t.next=3,k.PublicKey.createProgramAddress([g.toBuffer(),n.publicKey.toBuffer(),e.from([n.account.nonce])],r.programId);case 3:return a=t.sent,t.next=6,r.rpc.expireReward({accounts:{registrar:g,vendor:n.publicKey,vault:n.account.vault,vendorSigner:a,expiryReceiver:n.account.expiryReceiver,expiryReceiverToken:f,tokenProgram:S.TokenInstructions.TOKEN_PROGRAM_ID,clock:k.SYSVAR_CLOCK_PUBKEY}});case 6:o=t.sent,m(),i("Reward expired",{variant:"success",action:Object(T.jsx)(P.a,{signature:o})});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(T.jsxs)("div",{style:{marginLeft:"56px"},children:[Object(T.jsx)("div",{children:"Vendor"}),Object(T.jsxs)("ul",{children:[Object(T.jsxs)("li",{children:["Address ",n.publicKey.toString()]}),Object(T.jsxs)("li",{children:["Vault: ",n.account.vault.toString()]}),Object(T.jsxs)("li",{children:["Mint: ",n.account.mint.toString()]}),Object(T.jsxs)("li",{children:["Pool token supply snapshot:"," ",n.account.poolTokenSupply.toString()]}),Object(T.jsxs)("li",{children:["Expiry:"," ",new Date(1e3*n.account.expiryTs.toNumber()).toLocaleDateString()," (".concat(n.account.expiryTs.toNumber(),")")]}),Object(T.jsxs)("li",{children:["Expiry receiver: ",n.account.expiryReceiver.toString()]}),Object(T.jsxs)("li",{children:["Expired: ",n.account.expired.toString()]}),Object(T.jsxs)("li",{children:["Reward queue cursor: ",n.account.rewardEventQCursor.toString()]})]}),n.account.expiryTs.toNumber()<=Date.now()/1e3&&r.provider.wallet.publicKey.equals(n.account.expiryReceiver)&&Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:[Object(T.jsx)(w.a,{color:"primary",variant:"outlined",onClick:v,style:{marginRight:"24px"},children:"Expire"}),Object(T.jsx)("div",{style:{flex:1,marginRight:"24px"},children:Object(T.jsx)(K.a,{variant:"outlined",decimals:b.decimals,mint:n.account.mint,onChange:function(e){h(e)}})})]})]})}var E=function(){function e(t,n,a,i,c){Object(r.a)(this,e),this.reward=t,this.cursor=n,this.needsClaim=a,this.mint=i,this.vendor=c}return Object(a.a)(e,null,[{key:"fromMessage",value:function(t,n){var r=!1,a=t.accounts[n.vendor.toString()];if(void 0===a)return null;var i={publicKey:a.mint,account:t.accounts[a.mint.toString()]};if(void 0!==t.member){var c=t.accounts[t.member.account.balances.spt.toString()],o=t.accounts[t.member.account.balancesLocked.spt.toString()],s=c.amount+o.amount>0,u=a.rewardEventQCursor>=t.member.account.rewardsCursor,l=t.member.account.lastStakeTs<a.startTs,d=a.expired;r=s&&u&&l&&!d}var m={publicKey:n.vendor,account:a};return new e(n,a.rewardEventQCursor,r,i,m)}}]),e}()}).call(this,n(14).Buffer)},35:function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return j}));var r=n(15),a=n(0),i=n.n(a),c=n(37),o=n.n(c),s=n(383),u=n(85),l=n(2),d=i.a.createContext({tokenMap:new Map});function m(){return Object(a.useContext)(d).tokenMap}function p(e){var t=Object(a.useState)(new Map),n=Object(r.a)(t,2),i=n[0],c=n[1];return Object(a.useEffect)((function(){(new s.a).resolve().then((function(e){var t=e.filterByClusterSlug("mainnet-beta").getList();c(t.reduce((function(e,t){return e.set(t.address,t),e}),new Map))}))}),[c]),Object(l.jsx)(d.Provider,{value:{tokenMap:i},children:e.children})}function b(e,t){return new o.a(e*Math.pow(10,t))}function g(e,t){return e instanceof o.a&&(e=e.toNumber()),(e/Math.pow(10,t)).toString()}function j(e){var t=Object.keys(u.a.mainnet.mints).filter((function(t){return u.a.mainnet.mints[t].equals(e)})).pop();return t?t.toUpperCase():e.toString()}},370:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return N}));var r=n(25),a=n(15),i=n(1),c=n.n(i),o=n(5),s=n(0),u=n(24),l=n(37),d=n.n(l),m=n(46),p=n(4),b=n(637),g=n(638),j=n(639),y=n(81),f=n(391),h=n(210),v=n(643),x=n(645),O=n(209),w=n(641),k=n(633),S=n(371),K=n.n(S),M=n(263),C=n(390),P=n(640),T=n(392),A=n(40),R=n(141),W=n(53),E=n(43),L=n(66),I=n(23),D=n(206),B=n(35),V=n(54),U=n(2);function N(){var e=Object(E.b)().registryClient,t=Object(u.b)(),n=Object(u.c)((function(e){var t=e.accounts[e.registry.registrar.toString()];return{member:e.registry.member,memberAccount:e.registry.member?e.accounts[e.registry.member.toString()]:void 0,registrarAccount:t,registrar:e.registry.registrar}})),r=n.member,a=n.memberAccount,i=n.registrarAccount,s=n.registrar,l=Object(m.b)(),d=l.enqueueSnackbar,b=l.closeSnackbar,g=function(){var t=Object(o.a)(c.a.mark((function t(n,o){var u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d("Staking ".concat(Object(B.d)(i.poolMint)," Pool tokens"),{variant:"info"}),t.t0=e.rpc,t.t1=new R.u64(n),t.t2=o,t.t3=s,t.t4=i.rewardEventQ,t.t5=i.poolMint,t.t6=r,t.t7=e.provider.wallet.publicKey,t.t8=a.balances,t.t9=a.balancesLocked,t.next=13,Object(V.c)(e.programId,s,r);case 13:return t.t10=t.sent.publicKey,t.next=16,Object(V.d)(e.programId,s);case 16:return t.t11=t.sent.publicKey,t.t12=p.SYSVAR_CLOCK_PUBKEY,t.t13=W.TokenInstructions.TOKEN_PROGRAM_ID,t.t14={registrar:t.t3,rewardEventQ:t.t4,poolMint:t.t5,member:t.t6,beneficiary:t.t7,balances:t.t8,balancesLocked:t.t9,memberSigner:t.t10,registrarSigner:t.t11,clock:t.t12,tokenProgram:t.t13},t.t15={accounts:t.t14},t.next=23,t.t0.stake.call(t.t0,t.t1,t.t2,t.t15);case 23:u=t.sent,b(),d("Staking complete",{variant:"success",action:Object(U.jsx)(L.a,{signature:u})});case 26:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),j=function(){var n=Object(o.a)(c.a.mark((function n(o,u){var l,m,g;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d("Unstaking ".concat(o," ").concat(Object(B.d)(i.poolMint)," Pool tokens"),{variant:"info"}),l=new p.Account,n.t0=e.rpc,n.t1=new R.u64(o),n.t2=u,n.t3=s,n.t4=i.rewardEventQ,n.t5=i.poolMint,n.t6=l.publicKey,n.t7=r,n.t8=e.provider.wallet.publicKey,n.t9=a.balances,n.t10=a.balancesLocked,n.next=15,Object(V.c)(e.programId,s,r);case 15:return n.t11=n.sent.publicKey,n.t12=W.TokenInstructions.TOKEN_PROGRAM_ID,n.t13=p.SYSVAR_CLOCK_PUBKEY,n.t14=p.SYSVAR_RENT_PUBKEY,n.t15={registrar:n.t3,rewardEventQ:n.t4,poolMint:n.t5,pendingWithdrawal:n.t6,member:n.t7,beneficiary:n.t8,balances:n.t9,balancesLocked:n.t10,memberSigner:n.t11,tokenProgram:n.t12,clock:n.t13,rent:n.t14},n.t16=[l],n.next=23,e.account.pendingWithdrawal.createInstruction(l);case 23:return n.t17=n.sent,n.t18=[n.t17],n.t19={accounts:n.t15,signers:n.t16,instructions:n.t18},n.next=28,n.t0.startUnstake.call(n.t0,n.t1,n.t2,n.t19);case 28:return m=n.sent,n.next=31,e.account.pendingWithdrawal(l.publicKey);case 31:g=n.sent,t({type:I.a.RegistryCreatePendingWithdrawal,item:{pendingWithdrawal:{publicKey:l.publicKey,account:g}}}),b(),d("Stake transfer initiated",{variant:"success",action:Object(U.jsx)(L.a,{signature:m})});case 35:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),y=function(){var e=Object(o.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t>0&&g(t,n).catch((function(e){console.error(e),d("Error staking: ".concat(e.toString()),{variant:"error"})}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t>0&&j(t,n).catch((function(e){console.error(e),d("Error unstaking: ".concat(e.toString()),{variant:"error"})}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{style:{width:"100%"},children:[Object(U.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(U.jsx)("div",{style:{flex:1,marginTop:"24px",marginBottom:"24px"},children:Object(U.jsx)(_,{title:"Stake Pool",create:y,redeem:f})}),Object(U.jsx)(z,{style:{marginBottom:"24px"}})]}),Object(U.jsx)(Q,{})]})}function _(e){var t=e.title,n=e.create,r=e.redeem,i=Object(s.useState)(null),c=Object(a.a)(i,2),o=c[0],l=c[1],m=Object(s.useState)(!1),p=Object(a.a)(m,2),b=p[0],g=p[1],j=Object(u.c)((function(e){var t=e.accounts[e.registry.registrar.toString()];return{poolTokenMint:{publicKey:t.poolMint,account:e.accounts[t.poolMint.toString()]},member:e.registry.member,registrarAccount:t,mint:{publicKey:t.mint,account:e.accounts[t.mint.toString()]}}})),y=j.poolTokenMint,f=j.member,h=j.registrarAccount,k=j.mint,S=Object(B.c)(h.stakeRate,k.account.decimals),K=o?Object(B.c)(h.stakeRate.mul(new d.a(o)),k.account.decimals):0;return Object(U.jsxs)(M.a,{style:{marginBottom:"24px"},children:[Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)(P.a,{title:t,subheader:y.publicKey.toString()}),Object(U.jsx)("div",{style:{paddingRight:"16px",display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(U.jsx)(A.a,{color:"textSecondary"})})]}),Object(U.jsxs)(C.a,{children:[Object(U.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(U.jsxs)(A.a,{children:["Please enter the amount of pool tokens you would like to purchase in the form below. Upon pressing ",Object(U.jsx)("b",{children:"stake"})," you will create new pool tokens at a fixed price, adding to the amount of pool tokens outstanding."]}),Object(U.jsx)("br",{}),Object(U.jsx)(A.a,{children:"Unstaking works similarly, except one must incur an unbonding period where funds will not be able to be retrieved until the unbonding period ends. At the end of the unbonding period, click the blue checkbox next to your pending transfer. If the checkbox is grey, your unbonding period has not yet completed."}),Object(U.jsx)("br",{}),Object(U.jsx)(A.a,{style:{fontWeight:"bold"},children:"Total pool tokens outstanding"}),Object(U.jsx)(A.a,{children:y.account.supply.toString()}),Object(U.jsx)(A.a,{style:{fontWeight:"bold"},children:"Price per pool token"}),Object(U.jsx)(A.a,{children:S.toString()}),Object(U.jsx)(A.a,{style:{fontWeight:"bold"},children:"Your total cost"}),Object(U.jsxs)(A.a,{children:[K," ",Object(B.d)(k.publicKey)]}),Object(U.jsx)(A.a,{style:{fontWeight:"bold"},children:"Unbonding period (days)"}),Object(U.jsx)(A.a,{children:(h.withdrawalTimelock/86400).toString()})]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{style:{marginBottom:"10px"},children:Object(U.jsx)(T.a,{children:Object(U.jsx)(w.a,{style:{width:"100%"},label:"Pool tokens",type:"number",variant:"outlined",onChange:function(e){return l(parseInt(e.target.value))}})})}),Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(U.jsxs)("div",{children:[Object(U.jsx)(O.a,{disabled:void 0===f,color:"primary",variant:"contained",onClick:function(){return n(o,b)},children:"Stake"}),Object(U.jsx)(O.a,{disabled:void 0===f,color:"secondary",variant:"contained",style:{marginLeft:"10px"},onClick:function(){return r(o,b)},children:"Unstake"})]}),Object(U.jsx)("div",{children:Object(U.jsx)(v.a,{control:Object(U.jsx)(x.a,{checked:b,onChange:function(){return g(!b)}}),labelPlacement:"start",label:"Locked balances"})})]})]})]})]})}function z(t){var n=Object(E.b)().registryClient,r=Object(u.b)(),a=Object(u.c)((function(e){var t=e.registry.member?{publicKey:e.registry.member,account:e.accounts[e.registry.member.toString()]}:void 0,n={publicKey:e.registry.registrar,account:e.accounts[e.registry.registrar.toString()]},r={publicKey:n.account.mint,account:e.accounts[n.account.mint.toString()]};return{member:t,registrar:n,mint:r,pendingWithdrawals:null===e.registry.pendingWithdrawals?null:e.registry.pendingWithdrawals.map((function(t){return{publicKey:t,account:e.accounts[t.toString()]}}))}})),i=a.member,c=a.registrar,o=a.mint,l=a.pendingWithdrawals;return Object(s.useEffect)((function(){if(i&&null===l){var t=e.concat([c.publicKey.toBuffer(),i.publicKey.toBuffer()]);n.account.pendingWithdrawal.all(t).then((function(e){r({type:I.a.RegistrySetPendingWithdrawals,item:{pendingWithdrawals:e}})}))}}),[r,c,i,l,n.account.pendingWithdrawal]),Object(U.jsx)("div",{style:t.style,children:Object(U.jsx)(M.a,{style:{marginLeft:"20px",marginTop:"24px",width:"294px"},children:Object(U.jsxs)(C.a,{style:{paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0},children:[Object(U.jsxs)("div",{style:{marginLeft:"24px",marginTop:"24px",marginRight:"24px",borderBottom:"solid 1pt #ccc",paddingBottom:"12px"},children:[Object(U.jsx)(A.a,{style:{},children:"Your Pending Transfers"}),Object(U.jsx)(A.a,{style:{fontSize:"12px"},color:"textSecondary",children:'Click the checkmark to complete a transfer on or after the "end" date.'})]}),Object(U.jsx)("div",{style:{paddingLeft:"24px",paddingRight:"24px"},children:i&&null===l?Object(U.jsx)("div",{style:{paddingTop:"24px",marginBottom:"24px"},children:Object(U.jsx)(h.a,{style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}):null!==l&&l.length>0?l.map((function(e,t){return Object(U.jsx)(q,{isLast:t===l.length-1,registrar:c,pw:e,member:i,mint:o},e.publicKey.toString())})):Object(U.jsx)("div",{style:{paddingBottom:"24px",paddingTop:"12px"},children:Object(U.jsx)(A.a,{color:"textSecondary",style:{fontSize:"14px"},children:"None found"})})})]})})})}function q(e){var t=e.isLast,n=e.pw,r=e.member,a=e.registrar,i=e.mint,c=function(){var e=n.account.locked?"(locked)":"";return"".concat(Object(B.c)(n.account.amount,i.account.decimals)," ").concat(Object(B.d)(i.publicKey)," ").concat(e)}();return Object(U.jsxs)("div",{style:{paddingBottom:t?"24px":"12px",paddingTop:"12px",borderBottom:"solid 1pt #ccc"},children:[Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",overflow:"hidden"},children:[Object(U.jsx)("div",{children:Object(U.jsx)(A.a,{style:{whiteSpace:"pre",maxWidth:"195px",overflow:"hidden",fontWeight:"bold",fontSize:"14px"},children:"".concat(c)})}),Object(U.jsx)("div",{children:Object(U.jsx)(F,{registrar:a,member:r,pendingWithdrawal:n})})]}),Object(U.jsx)(A.a,{style:{fontSize:"14px"},children:"Start: ".concat(new Date(1e3*n.account.startTs.toNumber()).toLocaleString())}),Object(U.jsx)(A.a,{style:{fontSize:"14px"},children:"End:   ".concat(new Date(1e3*n.account.endTs.toNumber()).toLocaleString())}),Object(U.jsx)(A.a,{color:"textSecondary",style:{fontSize:"14px",overflow:"hidden"},children:n.account.pool.toString()})]})}function F(e){var t=e.pendingWithdrawal,n=e.member,a=e.registrar,i=Object(E.b)().registryClient,s=Object(m.b)(),l=s.enqueueSnackbar,d=s.closeSnackbar,b=Object(u.b)(),g=function(){var e=Object(o.a)(c.a.mark((function e(){var o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("Completing redemption",{variant:"info"}),o=t.account.locked?n.account.balancesLocked:n.account.balances,e.t0=i.rpc,e.t1=a.publicKey,e.t2=n.publicKey,e.t3=i.provider.wallet.publicKey,e.t4=t.publicKey,e.t5=o.vault,e.t6=o.vaultPw,e.next=11,Object(V.c)(i.programId,a.publicKey,n.publicKey);case 11:return e.t7=e.sent.publicKey,e.t8=p.SYSVAR_CLOCK_PUBKEY,e.t9=W.TokenInstructions.TOKEN_PROGRAM_ID,e.t10={registrar:e.t1,member:e.t2,beneficiary:e.t3,pendingWithdrawal:e.t4,vault:e.t5,vaultPw:e.t6,memberSigner:e.t7,clock:e.t8,tokenProgram:e.t9},e.t11={accounts:e.t10},e.next=18,e.t0.endUnstake.call(e.t0,e.t11);case 18:s=e.sent,u={publicKey:t.publicKey,account:Object(r.a)(Object(r.a)({},t.account),{},{burned:!0})},b({type:I.a.RegistryUpdatePendingWithdrawal,item:{pendingWithdrawal:u}}),d(),l("Stake transfer completed",{variant:"success",action:Object(U.jsx)(L.a,{signature:s})});case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=!1,y=D.a().ready,f=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g().catch((function(e){console.error("Error completing transfer: ".concat(e.toString())),l("Error completing transfer. Wait for the transfer's timelock to end and try again.",{variant:"error"})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t.account.burned&&(j=!0,y=D.a().active,f=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),t.account.endTs.toNumber()>Date.now()/1e3&&(j=!0,y=D.a().notReady,f=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),Object(U.jsx)("div",{onClick:f,style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(U.jsx)(k.a,{disabled:j,style:{width:"25px",height:"25px"},children:Object(U.jsx)(K.a,{style:{color:y,fontSize:"20px"}})})})}function Q(){var e=Object(E.b)().registryClient,t=Object(u.c)((function(e){var t=e.accounts[e.registry.registrar.toString()];return{registrar:e.registry.registrar,registrarAccount:t,mintAccount:e.accounts[t.mint.toString()]}})),n=t.registrar,r=t.registrarAccount,i=t.mintAccount,l=Object(s.useState)(null),d=Object(a.a)(l,2),m=d[0],p=d[1];return Object(s.useEffect)((function(){(function(){var t=Object(o.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.account.pendingWithdrawal.all(n.toBuffer());case 2:r=(r=t.sent).filter((function(e){return!1===e.account.burned})).sort((function(e,t){return e.account.startTs<t.account.startTs?1:e.account.startTs>t.account.startTs?-1:0})),p(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,n]),Object(U.jsxs)(M.a,{style:{maxHeight:"900px",overflow:"auto"},children:[Object(U.jsx)(A.a,{variant:"h5",style:{padding:"16px",borderBottom:"solid 1pt #ccc"},children:"All pending transfers"}),null!==m?Object(U.jsxs)(b.a,{children:[Object(U.jsx)(g.a,{children:Object(U.jsxs)(f.a,{children:[Object(U.jsx)(y.a,{children:"Member Account"}),Object(U.jsx)(y.a,{children:"Amount"}),Object(U.jsx)(y.a,{children:"Pool"}),Object(U.jsx)(y.a,{children:"Locked"}),Object(U.jsx)(y.a,{children:"Start"}),Object(U.jsx)(y.a,{children:"End"})]})}),Object(U.jsx)(j.a,{children:m.map((function(e){return Object(U.jsxs)(f.a,{children:[Object(U.jsx)(y.a,{children:e.account.member.toString()}),Object(U.jsx)(y.a,{children:Object(B.c)(e.account.amount.toString(),i.decimals)}),Object(U.jsx)(y.a,{children:e.account.amount.div(r.stakeRate).toString()}),Object(U.jsx)(y.a,{children:e.account.locked.toString()}),Object(U.jsx)(y.a,{children:new Date(1e3*e.account.startTs.toNumber()).toString()}),Object(U.jsx)(y.a,{children:new Date(1e3*e.account.endTs.toNumber()).toString()})]})}))})]}):Object(U.jsx)("div",{style:{padding:"24px"},children:Object(U.jsx)(h.a,{style:{display:"block",marginLeft:"auto",marginRight:"auto"}})})]})}}).call(this,n(14).Buffer)},424:function(e,t,n){},428:function(e,t){},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return w}));var r=n(1),a=n.n(r),i=n(5),c=n(16),o=n(21),s=n(25),u=n(0),l=n.n(u),d=n(24),m=n(4),p=n(47),b=n(49),g=n(77),j=n(207),y={version:"0.0.0",name:"lockup",instructions:[{name:"createVesting",accounts:[{name:"vesting",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"depositor",isMut:!0,isSigner:!1},{name:"depositorAuthority",isMut:!1,isSigner:!0},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"beneficiary",type:"publicKey"},{name:"depositAmount",type:"u64"},{name:"nonce",type:"u8"},{name:"startTs",type:"i64"},{name:"endTs",type:"i64"},{name:"periodCount",type:"u64"},{name:"realizor",type:{option:{defined:"Realizor"}}}]},{name:"withdraw",accounts:[{name:"vesting",isMut:!0,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"vault",isMut:!0,isSigner:!1},{name:"vestingSigner",isMut:!1,isSigner:!1},{name:"token",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"whitelistWithdraw",accounts:[{name:"transfer",accounts:[{name:"lockup",isMut:!1,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"whitelistedProgram",isMut:!1,isSigner:!1},{name:"vesting",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vestingSigner",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"whitelistedProgramVault",isMut:!0,isSigner:!1},{name:"whitelistedProgramVaultAuthority",isMut:!1,isSigner:!1}]}],args:[{name:"instructionData",type:"bytes"},{name:"amount",type:"u64"}]},{name:"whitelistDeposit",accounts:[{name:"transfer",accounts:[{name:"lockup",isMut:!1,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"whitelistedProgram",isMut:!1,isSigner:!1},{name:"vesting",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vestingSigner",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"whitelistedProgramVault",isMut:!0,isSigner:!1},{name:"whitelistedProgramVaultAuthority",isMut:!1,isSigner:!1}]}],args:[{name:"instructionData",type:"bytes"}]},{name:"availableForWithdrawal",accounts:[{name:"vesting",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[]}],state:{struct:{name:"Lockup",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"whitelist",type:{vec:{defined:"WhitelistEntry"}}}]}},methods:[{name:"new",accounts:[{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"whitelistAdd",accounts:[{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"entry",type:{defined:"WhitelistEntry"}}]},{name:"whitelistDelete",accounts:[{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"entry",type:{defined:"WhitelistEntry"}}]},{name:"setAuthority",accounts:[{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"newAuthority",type:"publicKey"}]}]},accounts:[{name:"Vesting",type:{kind:"struct",fields:[{name:"beneficiary",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"vault",type:"publicKey"},{name:"grantor",type:"publicKey"},{name:"outstanding",type:"u64"},{name:"startBalance",type:"u64"},{name:"createdTs",type:"i64"},{name:"startTs",type:"i64"},{name:"endTs",type:"i64"},{name:"periodCount",type:"u64"},{name:"whitelistOwned",type:"u64"},{name:"nonce",type:"u8"},{name:"realizor",type:{option:{defined:"Realizor"}}}]}}],types:[{name:"Realizor",type:{kind:"struct",fields:[{name:"program",type:"publicKey"},{name:"metadata",type:"publicKey"}]}},{name:"WhitelistEntry",type:{kind:"struct",fields:[{name:"programId",type:"publicKey"}]}}],errors:[{code:100,name:"InvalidTimestamp",msg:"Vesting end must be greater than the current unix timestamp."},{code:101,name:"InvalidPeriod",msg:"The number of vesting periods must be greater than zero."},{code:102,name:"InvalidDepositAmount",msg:"The vesting deposit amount must be greater than zero."},{code:103,name:"InvalidWhitelistEntry",msg:"The Whitelist entry is not a valid program address."},{code:104,name:"InvalidProgramAddress",msg:"Invalid program address. Did you provide the correct nonce?"},{code:105,name:"InvalidVaultOwner",msg:"Invalid vault owner."},{code:106,name:"InvalidVaultAmount",msg:"Vault amount must be zero."},{code:107,name:"InsufficientWithdrawalBalance",msg:"Insufficient withdrawal balance."},{code:108,name:"WhitelistFull",msg:"Whitelist is full"},{code:109,name:"WhitelistEntryAlreadyExists",msg:"Whitelist entry already exists"},{code:110,name:"InsufficientWhitelistDepositAmount",msg:"Balance must go up when performing a whitelist deposit"},{code:111,name:"WhitelistDepositOverflow",msg:"Cannot deposit more than withdrawn"},{code:112,name:"WhitelistWithdrawLimit",msg:"Tried to withdraw over the specified limit"},{code:113,name:"WhitelistEntryNotFound",msg:"Whitelist entry not found."},{code:114,name:"Unauthorized",msg:"You do not have sufficient permissions to perform this action."},{code:115,name:"UnableToWithdrawWhileStaked",msg:"You are unable to realize projected rewards until unstaking."},{code:116,name:"InvalidLockRealizor",msg:"The given lock realizor doesn't match the vesting account."},{code:117,name:"UnrealizedVesting",msg:"You have not realized this vesting account."},{code:118,name:"InvalidSchedule",msg:"Invalid vesting schedule given."}]},f={version:"0.0.0",name:"registry",instructions:[{name:"initialize",accounts:[{name:"registrar",isMut:!0,isSigner:!1},{name:"rewardEventQ",isMut:!0,isSigner:!1},{name:"poolMint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"nonce",type:"u8"},{name:"withdrawalTimelock",type:"i64"},{name:"stakeRate",type:"u64"},{name:"rewardQLen",type:"u32"}]},{name:"updateRegistrar",accounts:[{name:"registrar",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"newAuthority",type:{option:"publicKey"}},{name:"withdrawalTimelock",type:{option:"i64"}}]},{name:"createMember",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"member",isMut:!0,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"balances",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"balancesLocked",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"memberSigner",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"nonce",type:"u8"}]},{name:"updateMember",accounts:[{name:"member",isMut:!0,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0}],args:[{name:"metadata",type:{option:"publicKey"}}]},{name:"deposit",accounts:[{name:"member",isMut:!1,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"vault",isMut:!0,isSigner:!1},{name:"depositor",isMut:!0,isSigner:!1},{name:"depositorAuthority",isMut:!1,isSigner:!0},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"depositLocked",accounts:[{name:"vesting",isMut:!1,isSigner:!1},{name:"vestingVault",isMut:!0,isSigner:!1},{name:"depositorAuthority",isMut:!1,isSigner:!0},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"memberVault",isMut:!0,isSigner:!1},{name:"memberSigner",isMut:!1,isSigner:!1},{name:"registry",isMut:!1,isSigner:!1},{name:"registrar",isMut:!1,isSigner:!1},{name:"member",isMut:!1,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"stake",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"rewardEventQ",isMut:!1,isSigner:!1},{name:"poolMint",isMut:!0,isSigner:!1},{name:"member",isMut:!0,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"balances",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"balancesLocked",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"memberSigner",isMut:!1,isSigner:!1},{name:"registrarSigner",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"sptAmount",type:"u64"},{name:"locked",type:"bool"}]},{name:"startUnstake",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"rewardEventQ",isMut:!1,isSigner:!1},{name:"poolMint",isMut:!0,isSigner:!1},{name:"pendingWithdrawal",isMut:!0,isSigner:!1},{name:"member",isMut:!1,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"balances",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"balancesLocked",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"memberSigner",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"sptAmount",type:"u64"},{name:"locked",type:"bool"}]},{name:"endUnstake",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"member",isMut:!1,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"pendingWithdrawal",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1},{name:"memberSigner",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"withdraw",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"member",isMut:!1,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"vault",isMut:!0,isSigner:!1},{name:"memberSigner",isMut:!1,isSigner:!1},{name:"depositor",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"withdrawLocked",accounts:[{name:"vesting",isMut:!1,isSigner:!1},{name:"vestingVault",isMut:!0,isSigner:!1},{name:"vestingSigner",isMut:!1,isSigner:!0},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"memberVault",isMut:!0,isSigner:!1},{name:"memberSigner",isMut:!1,isSigner:!1},{name:"registry",isMut:!1,isSigner:!1},{name:"registrar",isMut:!1,isSigner:!1},{name:"member",isMut:!1,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"dropReward",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"rewardEventQ",isMut:!0,isSigner:!1},{name:"poolMint",isMut:!1,isSigner:!1},{name:"vendor",isMut:!0,isSigner:!1},{name:"vendorVault",isMut:!0,isSigner:!1},{name:"depositor",isMut:!0,isSigner:!1},{name:"depositorAuthority",isMut:!1,isSigner:!0},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"kind",type:{defined:"RewardVendorKind"}},{name:"total",type:"u64"},{name:"expiryTs",type:"i64"},{name:"expiryReceiver",type:"publicKey"},{name:"nonce",type:"u8"}]},{name:"claimReward",accounts:[{name:"cmn",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"member",isMut:!0,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"balances",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"balancesLocked",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"vendor",isMut:!1,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vendorSigner",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}]},{name:"to",isMut:!0,isSigner:!1}],args:[]},{name:"claimRewardLocked",accounts:[{name:"cmn",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"member",isMut:!0,isSigner:!1},{name:"beneficiary",isMut:!1,isSigner:!0},{name:"balances",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"balancesLocked",accounts:[{name:"spt",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vaultStake",isMut:!0,isSigner:!1},{name:"vaultPw",isMut:!0,isSigner:!1}]},{name:"vendor",isMut:!1,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vendorSigner",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}]},{name:"registry",isMut:!1,isSigner:!1},{name:"lockupProgram",isMut:!1,isSigner:!1}],args:[{name:"nonce",type:"u8"}]},{name:"expireReward",accounts:[{name:"registrar",isMut:!1,isSigner:!1},{name:"vendor",isMut:!0,isSigner:!1},{name:"vault",isMut:!0,isSigner:!1},{name:"vendorSigner",isMut:!1,isSigner:!1},{name:"expiryReceiver",isMut:!1,isSigner:!0},{name:"expiryReceiverToken",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[]}],state:{struct:{name:"Registry",type:{kind:"struct",fields:[{name:"lockupProgram",type:"publicKey"}]}},methods:[{name:"new",accounts:[{name:"lockupProgram",isMut:!1,isSigner:!1}],args:[]},{name:"setLockupProgram",accounts:[{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"lockupProgram",type:"publicKey"}]}]},accounts:[{name:"Registrar",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"nonce",type:"u8"},{name:"withdrawalTimelock",type:"i64"},{name:"rewardEventQ",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"poolMint",type:"publicKey"},{name:"stakeRate",type:"u64"}]}},{name:"Member",type:{kind:"struct",fields:[{name:"registrar",type:"publicKey"},{name:"beneficiary",type:"publicKey"},{name:"metadata",type:"publicKey"},{name:"balances",type:{defined:"BalanceSandbox"}},{name:"balancesLocked",type:{defined:"BalanceSandbox"}},{name:"rewardsCursor",type:"u32"},{name:"lastStakeTs",type:"i64"},{name:"nonce",type:"u8"}]}},{name:"PendingWithdrawal",type:{kind:"struct",fields:[{name:"registrar",type:"publicKey"},{name:"member",type:"publicKey"},{name:"burned",type:"bool"},{name:"pool",type:"publicKey"},{name:"startTs",type:"i64"},{name:"endTs",type:"i64"},{name:"amount",type:"u64"},{name:"locked",type:"bool"}]}},{name:"RewardQueue",type:{kind:"struct",fields:[{name:"head",type:"u32"},{name:"tail",type:"u32"},{name:"events",type:{vec:{defined:"RewardEvent"}}}]}},{name:"RewardVendor",type:{kind:"struct",fields:[{name:"registrar",type:"publicKey"},{name:"vault",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"nonce",type:"u8"},{name:"poolTokenSupply",type:"u64"},{name:"rewardEventQCursor",type:"u32"},{name:"startTs",type:"i64"},{name:"expiryTs",type:"i64"},{name:"expiryReceiver",type:"publicKey"},{name:"from",type:"publicKey"},{name:"total",type:"u64"},{name:"expired",type:"bool"},{name:"kind",type:{defined:"RewardVendorKind"}}]}}],types:[{name:"BalanceSandbox",type:{kind:"struct",fields:[{name:"spt",type:"publicKey"},{name:"vault",type:"publicKey"},{name:"vaultStake",type:"publicKey"},{name:"vaultPw",type:"publicKey"}]}},{name:"RewardEvent",type:{kind:"struct",fields:[{name:"vendor",type:"publicKey"},{name:"ts",type:"i64"},{name:"locked",type:"bool"}]}},{name:"RewardVendorKind",type:{kind:"enum",variants:[{name:"Unlocked"},{name:"Locked",fields:[{name:"start_ts",type:"i64"},{name:"end_ts",type:"i64"},{name:"period_count",type:"u64"}]}]}}],errors:[{code:100,name:"RewardQAlreadyInitialized",msg:"The given reward queue has already been initialized."},{code:101,name:"InvalidNonce",msg:"The nonce given doesn't derive a valid program address."},{code:102,name:"InvalidPoolMintAuthority",msg:"Invalid pool mint authority"},{code:103,name:"InvalidMemberSigner",msg:"Member signer doesn't match the derived address."},{code:104,name:"InvalidVaultDeposit",msg:"The given vault owner must match the signing depositor."},{code:105,name:"InvalidDepositor",msg:"The signing depositor doesn't match either of the balance accounts"},{code:106,name:"InvalidVault",msg:"The vault given does not match the vault expected."},{code:107,name:"InvalidVaultOwner",msg:"Invalid vault owner."},{code:108,name:"Unknown",msg:"An unknown error has occured."},{code:109,name:"UnstakeTimelock",msg:"The unstake timelock has not yet expired."},{code:110,name:"InsufficientReward",msg:"Reward vendors must have at least one token unit per pool token"},{code:111,name:"InvalidExpiry",msg:"Reward expiry must be after the current clock timestamp."},{code:112,name:"VendorExpired",msg:"The reward vendor has been expired."},{code:113,name:"CursorAlreadyProcessed",msg:"This reward has already been processed."},{code:114,name:"NotStakedDuringDrop",msg:"The account was not staked at the time of this reward."},{code:115,name:"VendorNotYetExpired",msg:"The vendor is not yet eligible for expiry."},{code:116,name:"RewardsNeedsProcessing",msg:"Please collect your reward before otherwise using the program."},{code:117,name:"ExpectedLockedVendor",msg:"Locked reward vendor expected but an unlocked vendor was given."},{code:118,name:"ExpectedUnlockedVendor",msg:"Unlocked reward vendor expected but a locked vendor was given."},{code:119,name:"InvalidVestingSigner",msg:"Locked deposit from an invalid deposit authority."},{code:120,name:"UnrealizedReward",msg:"Locked rewards cannot be realized until one unstaked all tokens."},{code:121,name:"InvalidBeneficiary",msg:"The beneficiary doesn't match."},{code:122,name:"InvalidRealizorMetadata",msg:"The given member account does not match the realizor metadata."},{code:123,name:"InvalidVestingSchedule",msg:"Invalid vesting schedule for the locked reward."},{code:124,name:"InvalidProgramAuthority",msg:"Please specify the correct authority for this program."}]},h={version:"0.0.0",name:"multisig",instructions:[{name:"createMultisig",accounts:[{name:"multisig",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"owners",type:{vec:"publicKey"}},{name:"threshold",type:"u64"},{name:"nonce",type:"u8"}]},{name:"createTransaction",accounts:[{name:"multisig",isMut:!1,isSigner:!1},{name:"transaction",isMut:!0,isSigner:!1},{name:"proposer",isMut:!1,isSigner:!0},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"pid",type:"publicKey"},{name:"accs",type:{vec:{defined:"TransactionAccount"}}},{name:"data",type:"bytes"}]},{name:"approve",accounts:[{name:"multisig",isMut:!1,isSigner:!1},{name:"transaction",isMut:!0,isSigner:!1},{name:"owner",isMut:!1,isSigner:!0}],args:[]},{name:"setOwners",accounts:[{name:"multisig",isMut:!0,isSigner:!1},{name:"multisigSigner",isMut:!1,isSigner:!0}],args:[{name:"owners",type:{vec:"publicKey"}}]},{name:"changeThreshold",accounts:[{name:"multisig",isMut:!0,isSigner:!1},{name:"multisigSigner",isMut:!1,isSigner:!0}],args:[{name:"threshold",type:"u64"}]},{name:"executeTransaction",accounts:[{name:"multisig",isMut:!1,isSigner:!1},{name:"multisigSigner",isMut:!1,isSigner:!1},{name:"transaction",isMut:!0,isSigner:!1}],args:[]}],accounts:[{name:"Multisig",type:{kind:"struct",fields:[{name:"owners",type:{vec:"publicKey"}},{name:"threshold",type:"u64"},{name:"nonce",type:"u8"},{name:"ownerSetSeqno",type:"u32"}]}},{name:"Transaction",type:{kind:"struct",fields:[{name:"multisig",type:"publicKey"},{name:"programId",type:"publicKey"},{name:"accounts",type:{vec:{defined:"TransactionAccount"}}},{name:"data",type:"bytes"},{name:"signers",type:{vec:"bool"}},{name:"didExecute",type:"bool"},{name:"ownerSetSeqno",type:"u32"}]}}],types:[{name:"TransactionAccount",type:{kind:"struct",fields:[{name:"pubkey",type:"publicKey"},{name:"isSigner",type:"bool"},{name:"isWritable",type:"bool"}]}}],errors:[{code:100,name:"InvalidOwner",msg:"The given owner is not part of this multisig."},{code:101,name:"NotEnoughSigners",msg:"Not enough owners signed this transaction."},{code:102,name:"TransactionAlreadySigned",msg:"Cannot delete a transaction that has been signed by an owner."},{code:103,name:"Overflow",msg:"Overflow when adding."},{code:104,name:"UnableToDelete",msg:"Cannot delete a transaction the owner did not create."},{code:105,name:"AlreadyExecuted",msg:"The given transaction has already been executed."},{code:106,name:"InvalidThreshold",msg:"Threshold must be less than or equal to the number of owners."}]},v=n(2);function x(){var e=Object(u.useContext)(O);if(!e)throw new Error("Missing wallet context");return e}var O=l.a.createContext(null);function w(e){var t=Object(u.useMemo)((function(){return[Object(j.a)(),Object(j.b)(),Object(j.c)()]}),[]);return Object(v.jsx)(g.a,{wallets:t,children:Object(v.jsx)(k,Object(s.a)({},e))})}function k(e){var t=Object(g.b)().wallet,n=Object(d.c)((function(e){return{walletProvider:e.common.walletProvider,network:e.common.network}})),r=n.walletProvider,a=n.network,i=Object(u.useMemo)((function(){var e={preflightCommitment:"recent",commitment:"recent"},n=new m.Connection(a.url,e.preflightCommitment),r=new S(t?t.adapter():void 0),i=new p.Provider(n,r,e);return{wallet:r,lockupClient:new b.b(y,a.lockupProgramId,i),registryClient:new b.b(f,a.registryProgramId,i),multisigClient:new b.b(h,a.multisigProgramId,i)}}),[t,r,a]),c=i.wallet,o=i.lockupClient,s=i.registryClient,l=i.multisigClient;return Object(v.jsx)(O.Provider,{value:{wallet:c,lockupClient:o,registryClient:s,multisigClient:l},children:e.children})}var S=function(){function e(t){Object(c.a)(this,e),this.adapter=t}return Object(o.a)(e,[{key:"publicKey",get:function(){return this.adapter?this.adapter.publicKey:void 0}},{key:"on",value:function(e,t){if(this.adapter)return this.adapter.on(e,t)}},{key:"connect",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.adapter){e.next=9;break}return e.prev=1,e.next=4,this.adapter.connect();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){this.adapter&&this.adapter.disconnect()}},{key:"signTransaction",value:function(e){if(this.adapter)return this.adapter.signTransaction(e)}},{key:"signAllTransactions",value:function(e){if(this.adapter)return this.adapter.signAllTransactions(e)}}]),e}()},430:function(e,t){},450:function(e,t){},451:function(e,t){},489:function(e,t){},491:function(e,t){},54:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return x}));var r=n(26),a=n(1),i=n.n(a),c=n(15),o=n(5),s=n(4),u=n(47),l=n(49);function d(e,t){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(i.a.mark((function e(t,n){var r,a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.e.PublicKey.findProgramAddress([n.toBuffer()],t);case 2:return r=e.sent,a=Object(c.a)(r,2),o=a[0],s=a[1],e.abrupt("return",{publicKey:o,nonce:s});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t,n){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(i.a.mark((function e(t,n,r){var a,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.e.PublicKey.findProgramAddress([n.toBuffer(),r.toBuffer()],t);case 2:return a=e.sent,o=Object(c.a)(a,2),s=o[0],u=o[1],e.abrupt("return",{publicKey:s,nonce:u});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function e(t,n,r){var a,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.e.PublicKey.findProgramAddress([n.toBuffer(),r.toBuffer()],t);case 2:return a=e.sent,o=Object(c.a)(a,2),s=o[0],u=o[1],e.abrupt("return",{publicKey:s,nonce:u});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.d.sha256("".concat(t.toString(),":Member"));case 2:return n=e.sent,e.abrupt("return",n.slice(0,32));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(i.a.mark((function e(t,n,a){var c,o,l,d,m,p,b,g,j,y,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new s.Account,o=new s.Account,l=new s.Account,d=new s.Account,e.next=6,t.connection.getMinimumBalanceForRentExemption(165);case 6:return m=e.sent,e.next=9,u.createTokenAccountInstrs(t,c.publicKey,n.poolMint,a,m);case 9:return p=e.sent,e.next=12,u.createTokenAccountInstrs(t,o.publicKey,n.mint,a,m);case 12:return b=e.sent,e.next=15,u.createTokenAccountInstrs(t,l.publicKey,n.mint,a,m);case 15:return g=e.sent,e.next=18,u.createTokenAccountInstrs(t,d.publicKey,n.mint,a,m);case 18:return j=e.sent,(y=new s.Transaction).add.apply(y,Object(r.a)(p).concat(Object(r.a)(b),Object(r.a)(g),Object(r.a)(j))),f={tx:y,signers:[c,o,l,d]},e.abrupt("return",[f,{spt:c.publicKey,vault:o.publicKey,vaultStake:l.publicKey,vaultPw:d.publicKey}]);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){for(var t=[],n=e.tail;n<e.head;){var r=n%e.events.length;t.push(e.events[r]),n+=1}return t}},554:function(e,t){},558:function(e,t){},560:function(e,t){},588:function(e,t){},590:function(e,t){},595:function(e,t){},597:function(e,t){},604:function(e,t){},616:function(e,t){},619:function(e,t){},626:function(e,t){},630:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),c=n(38),o=n.n(c),s=(n(424),n(24)),u=n(252),l=n(52),d=n(46),m=n(693),p=n(694),b=n(692),g=n(382),j=n(25),y=n(23),f=n(85);!function(e){e[e.NeedsBootstrap=0]="NeedsBootstrap",e[e.IsBootstrapping=1]="IsBootstrapping",e[e.Bootstrapped=2]="Bootstrapped"}(r||(r={}));var h={common:{bootstrapTrigger:!1,shutdownTrigger:!1,isWalletConnected:!1,walletProvider:"https://www.sollet.io",bootstrapState:r.NeedsBootstrap,network:f.a.mainnet,ownedTokenAccounts:[]},lockup:{vestings:[]},registry:{pendingWithdrawals:null,registrar:f.a.mainnet.registrars.srm},accounts:{}},v=Object(g.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n={common:Object(j.a)({},e.common),lockup:Object(j.a)({},e.lockup),registry:Object(j.a)({},e.registry),accounts:Object(j.a)({},e.accounts)};switch(t.type){case y.a.CommonAppWillBootstrap:return n.common.bootstrapState=r.IsBootstrapping,n.common.bootstrapTrigger=!1,n;case y.a.CommonAppDidBootstrap:return n.common.bootstrapState=r.Bootstrapped,n;case y.a.CommonWalletSetProvider:return n.common.walletProvider=t.item.walletProvider,n;case y.a.CommonWalletDidConnect:return n.common.isWalletConnected=!0,n;case y.a.CommonWalletDidDisconnect:return n.common.isWalletConnected=!1,n;case y.a.CommonSetNetwork:if(n.common.network.label!==t.item.network.label){n.common.network=t.item.network,n.common.bootstrapState=r.NeedsBootstrap,n.common.shutdownTrigger=!0;var a=f.a[t.item.networkKey];n.registry.registrar=Object.values(a.registrars)[0]}return n;case y.a.CommonTriggerBootstrap:return n.common.bootstrapState=r.NeedsBootstrap,n.common.bootstrapTrigger=!0,n;case y.a.CommonTriggerShutdown:return n.common.bootstrapState=r.NeedsBootstrap,n.common.shutdownTrigger=!0,n;case y.a.CommonDidShutdown:var i=Object(j.a)({},h);return i.common.network=n.common.network,i.registry.registrar=n.registry.registrar,i;case y.a.CommonOwnedTokenAccountsSet:return n.common.ownedTokenAccounts=t.item.ownedTokenAccounts,n;case y.a.CommonOwnedTokenAccountsUpdate:return n.common.ownedTokenAccounts=n.common.ownedTokenAccounts.map((function(e){return e.publicKey.equals(t.item.account.publicKey)?t.item.account:e})),n;case y.a.LockupSetVestings:return n.lockup.vestings=t.item.vestingAccounts,n;case y.a.LockupUpdateVesting:return n.accounts[t.item.vesting.publicKey.toString()]=t.item.vesting.account,n;case y.a.LockupCreateVesting:return n.lockup.vestings.unshift(t.item.vesting.publicKey),n.accounts[t.item.vesting.publicKey.toString()]=t.item.vesting.account,n;case y.a.RegistrySetMember:return n.registry.member=t.item.member,n;case y.a.RegistrySetRegistrar:return n.registry.registrar=t.item.registrar,n.registry.member=t.item.member,n.registry.pendingWithdrawals=null,n;case y.a.RegistrySetPendingWithdrawals:return t.item.pendingWithdrawals.forEach((function(e){n.accounts[e.publicKey.toString()]=e.account})),n.registry.pendingWithdrawals=t.item.pendingWithdrawals.map((function(e){return e.publicKey})),n;case y.a.RegistryCreatePendingWithdrawal:return n.accounts[t.item.pendingWithdrawal.publicKey.toString()]=t.item.pendingWithdrawal.account,null===n.registry.pendingWithdrawals&&(n.registry.pendingWithdrawals=[]),n.registry.pendingWithdrawals.unshift(t.item.pendingWithdrawal.publicKey),n;case y.a.RegistryUpdatePendingWithdrawal:return n.accounts[t.item.pendingWithdrawal.publicKey.toString()]=t.item.pendingWithdrawal.account,n;case y.a.AccountAdd:case y.a.AccountUpdate:return n.accounts[t.item.account.publicKey.toString()]=t.item.account.account,n;default:return n}})),x=n(43),O=n(1),w=n.n(O),k=n(5),S=n(9),K=n(4),M=n(141),C=n(47),P=n(49),T=n(54),A=n(2);function R(e){var t=Object(s.c)((function(e){return{bootstrapTrigger:e.common.bootstrapTrigger,shutdownTrigger:e.common.shutdownTrigger,network:e.common.network,registrar:e.registry.registrar}})),n=t.bootstrapTrigger,r=t.shutdownTrigger,i=t.network,c=t.registrar,o=Object(s.b)(),u=Object(x.b)(),l=u.wallet,m=u.lockupClient,p=u.registryClient,b=Object(d.b)().enqueueSnackbar,g=Object(a.useCallback)(Object(k.a)(w.a.mark((function e(){var t,n,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b("Connecting to ".concat(i.label),{variant:"info",autoHideDuration:2500}),o({type:y.a.CommonAppWillBootstrap,item:{}}),e.next=4,W({dispatch:o,lockupClient:m,registryClient:p,network:i,wallet:l});case 4:return t=e.sent,n=t.registrars,r=t.members,a=Object.fromEntries(new Map(n.map((function(e){return[e.publicKey.toString(),e.account]})))),r.forEach((function(e){a[e.publicKey.toString()]=e.account})),e.next=11,L(p,a,o,c,void 0);case 11:o({type:y.a.CommonAppDidBootstrap,item:{}}),b("Connection established",{variant:"success",autoHideDuration:2500});case 13:case"end":return e.stop()}}),e)}))),[o,b,p,c,m,i,l]),j=Object(a.useCallback)(Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.disconnect(),o({type:y.a.CommonDidShutdown,item:{}});case 2:case"end":return e.stop()}}),e)}))),[o,l]);return Object(a.useEffect)((function(){n&&g().catch((function(e){console.error(e),b("Error bootstrapping application: ".concat(e.toString()),{variant:"error"})})),r&&j().catch((function(e){console.error(e),b("Error shutting down application: ".concat(e.toString()),{variant:"error"})}))}),[n,g,r,j,b]),Object(A.jsx)(A.Fragment,{children:e.children})}function W(e){return E.apply(this,arguments)}function E(){return(E=Object(k.a)(w.a.mark((function e(t){var n,r,a,i,c,o,s,u,l,d,m,p;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.lockupClient,a=t.registryClient,i=t.network,c=t.wallet,o=function(){var e=Object(k.a)(w.a.mark((function e(){var t,r,c,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.values(i.registrars),e.next=3,P.d.getMultipleAccounts(a.provider.connection,t);case 3:return r=e.sent.map((function(e){var t=a.coder.accounts.decode("Registrar",e.account.data);return{publicKey:e.publicKey,account:t}})),e.next=6,P.d.getMultipleAccounts(a.provider.connection,r.map((function(e){return e.account.mint})));case 6:return c=e.sent.map((function(e){var t=Object(C.parseMintAccount)(e.account.data);return{publicKey:e.publicKey,account:t}})),e.next=9,P.d.getMultipleAccounts(a.provider.connection,r.map((function(e){return e.account.rewardEventQ})));case 9:return o=e.sent.map((function(e){var t=a.coder.accounts.decode("RewardQueue",e.account.data);return{publicKey:e.publicKey,account:t}})),r.concat(c).concat(o).forEach((function(e){n({type:y.a.AccountAdd,item:{account:e}})})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(k.a)(w.a.mark((function e(t){var r,i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return e.publicKey})).map((function(e){return Object(T.b)(e).then((function(e){return K.PublicKey.createWithSeed(c.publicKey,e,a.programId)})).then((function(t){return{memberPublicKey:t,registrar:e}}))})));case 2:return r=e.sent,i=r.map((function(e){return e.memberPublicKey})),e.next=6,P.d.getMultipleAccounts(a.provider.connection,i);case 6:return o=e.sent.filter((function(e){return null!==e})).map((function(e){var t=a.coder.accounts.decode("Member",e.account.data);return{publicKey:e.publicKey,account:t}})),e.next=9,Promise.all(o.map((function(e){return U(e,n,a.provider.connection)})));case 9:return o.forEach((function(e){n({type:y.a.AccountAdd,item:{account:e}})})),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(k.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map((function(e){return e.account.mint})).concat(t.map((function(e){return e.account.poolMint}))),e.next=3,P.d.getMultipleAccounts(a.provider.connection,r);case 3:e.sent.map((function(e){var t=Object(C.parseMintAccount)(e.account.data);return{publicKey:e.publicKey,account:t}})).forEach((function(e){n({type:y.a.AccountAdd,item:{account:e}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(r.provider.connection,c.publicKey);case 2:t=e.sent,n({type:y.a.CommonOwnedTokenAccountsSet,item:{ownedTokenAccounts:t}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.account.vesting.all(c.publicKey.toBuffer());case 2:(t=e.sent).forEach((function(e){n({type:y.a.AccountAdd,item:{account:e}})})),n({type:y.a.LockupSetVestings,item:{vestingAccounts:t.map((function(e){return e.publicKey}))}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=8,o();case 8:return m=e.sent,e.next=11,s(m);case 11:return p=e.sent,e.next=14,u(m);case 14:return e.next=16,l();case 16:return e.next=18,d();case 18:return e.abrupt("return",{registrars:m,members:p});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,n,r,a){return I.apply(this,arguments)}function I(){return(I=Object(k.a)(w.a.mark((function e(t,n,r,a,i){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)(w.a.mark((function e(){var r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==i){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.t0=K.PublicKey,e.t1=t.provider.wallet.publicKey,e.next=6,Object(T.b)(i);case 6:return e.t2=e.sent,e.t3=t.programId,e.next=10,e.t0.createWithSeed.call(e.t0,e.t1,e.t2,e.t3);case 10:return r=e.sent,a=n[r.toString()],e.abrupt("return",void 0!==a?{publicKey:r,account:a}:void 0);case 13:case"end":return e.stop()}}),e)})))();case 2:return e.sent,e.next=5,Object(k.a)(w.a.mark((function e(){var r,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=K.PublicKey,e.t1=t.provider.wallet.publicKey,e.next=4,Object(T.b)(a);case 4:return e.t2=e.sent,e.t3=t.programId,e.next=8,e.t0.createWithSeed.call(e.t0,e.t1,e.t2,e.t3);case 8:return r=e.sent,i=n[r.toString()],e.abrupt("return",i?{publicKey:r,account:i}:void 0);case 11:case"end":return e.stop()}}),e)})))();case 5:return c=e.sent,e.next=8,D(t,n,r,a,i);case 8:c&&V(c,t,r),r({type:y.a.RegistrySetRegistrar,item:{registrar:a,member:c?c.publicKey:void 0}});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,n,r,a){return B.apply(this,arguments)}function B(){return(B=Object(k.a)(w.a.mark((function e(t,n,r,a,i){var c,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i&&(c=n[i.toString()],t.account.rewardQueue.unsubscribe(c.rewardEventQ)),o=n[a.toString()],t.account.rewardQueue.subscribe(o.rewardEventQ).on("change",(function(e){r({type:y.a.AccountUpdate,item:{account:{publicKey:o.rewardEventQ,account:e}}})})),t.provider.connection.onAccountChange(o.poolMint,(function(e){var t=Object(C.parseMintAccount)(e.data);r({type:y.a.AccountUpdate,item:{account:{publicKey:o.poolMint,account:t}}})}),"recent");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t,n){t.account.member.subscribe(e.publicKey).on("change",(function(t){n({type:y.a.AccountUpdate,item:{account:{publicKey:e.publicKey,account:t}}})}));var r=function(e){t.provider.connection.onAccountChange(e,(function(t){var r=Object(C.parseTokenAccount)(t.data);n({type:y.a.AccountUpdate,item:{account:{publicKey:e,account:r}}})}),"recent")};r(e.account.balances.vault),r(e.account.balances.vaultStake),r(e.account.balances.vaultPw),r(e.account.balances.spt),r(e.account.balancesLocked.vault),r(e.account.balancesLocked.vaultStake),r(e.account.balancesLocked.vaultPw),r(e.account.balancesLocked.spt)}function U(e,t,n){return N.apply(this,arguments)}function N(){return(N=Object(k.a)(w.a.mark((function e(t,n,r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.d.getMultipleAccounts(r,[t.account.balances.vault,t.account.balances.vaultStake,t.account.balances.vaultPw,t.account.balances.spt,t.account.balancesLocked.vault,t.account.balancesLocked.vaultStake,t.account.balancesLocked.vaultPw,t.account.balancesLocked.spt]);case 2:e.sent.filter((function(e){return null!==e})).map((function(e){return{publicKey:e.publicKey,account:Object(C.parseTokenAccount)(e.account.data)}})).forEach((function(e){n({type:y.a.AccountAdd,item:{account:e}})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return z.apply(this,arguments)}function z(){return(z=Object(k.a)(w.a.mark((function e(t,n){var r,a,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=F(n),e.next=3,t.getProgramAccounts(M.TOKEN_PROGRAM_ID,{filters:r});case 3:return a=e.sent,i=a.map((function(e){var t=e.pubkey,n=e.account.data;return{publicKey:new K.PublicKey(t),account:Q(n)}})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=S.struct([S.blob(32,"mint"),S.blob(32,"owner"),S.nu64("amount"),S.blob(93)]);function F(e){return[{memcmp:{offset:q.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:q.span}]}function Q(e){var t=q.decode(e),n=t.mint,r=t.owner,a=t.amount;return{mint:new K.PublicKey(n),owner:new K.PublicKey(r),amount:a}}var Y=n(35),G=n(15),J=n(40),H=n(680),Z=n(687),X=n(209),$=n(684),ee=n(685),te=n(381),ne=n(686),re=n(633),ae=n(368),ie=n.n(ae),ce=n(367),oe=n.n(ce),se=n(210),ue=n(208),le=n(389);function de(e){var t=e.isAppReady,n=Object(s.c)((function(e){return{network:e.common.network,isAppReady:e.common.isWalletConnected&&e.common.bootstrapState===r.Bootstrapped}})).network,i=Object(s.b)(),c=Object(d.b)(),o=c.enqueueSnackbar,u=c.closeSnackbar,l=Object(x.b)(),m=l.wallet,p=l.registryClient,b=l.lockupClient,g=Object(a.useState)(!1),j=Object(G.a)(g,2),y=j[0],f=j[1];return Object(A.jsx)($.a,{position:"static",style:{background:"#ffffff",color:"#272727",boxShadow:"none",borderBottom:"solid 1pt #ccc"},children:Object(A.jsx)(ee.a,{children:Object(A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(A.jsxs)("div",{style:{display:"flex"},children:[Object(A.jsx)(me,{}),Object(A.jsx)(pe,{label:"Stake",hrefClient:"/stake"}),Object(A.jsx)(pe,{label:"Presale",hrefClient:"https://greatlegendary.com/presale/"}),Object(A.jsx)(pe,{label:"Market",hrefClient:"https://market.greatlegendary.com/"}),Object(A.jsx)(pe,{label:"Whitepaper",hrefClient:"https://whitepaper.greatlegendary.com/"})]}),Object(A.jsxs)("div",{style:{display:"flex"},children:[Object(A.jsx)("div",{onClick:function(){f(!0),o("Refreshing",{variant:"info"}),W({dispatch:i,lockupClient:b,registryClient:p,network:n,wallet:m}).then((function(){f(!1),u()})).catch((function(e){f(!1),u(),o("There was a problem refreshing: ".concat(e),{variant:"error",autoHideDuration:2500})}))},style:{display:t?"block":"none",justifyContent:"center",flexDirection:"column",marginRight:"10px"},children:y?Object(A.jsx)("div",{style:{marginTop:"8px",padding:"10px"},children:Object(A.jsx)(se.a,{style:{width:"24px",height:"24px"}})}):Object(A.jsx)("div",{children:Object(A.jsx)(re.a,{children:Object(A.jsx)(oe.a,{})})})}),Object(A.jsx)(be,{}),Object(A.jsx)(ge,{})]})]})})})}function me(){var e=Object(l.e)();return Object(A.jsx)("div",{style:{display:"flex"},onClick:function(){return e.push("/")},children:Object(A.jsx)(X.a,{color:"inherit",children:Object(A.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:Object(A.jsx)("img",{style:{display:"block",height:"35px"},alt:"Logo",src:"https://greatlegendary.com/wp-content/uploads/2021/11/logo-300x180.png"})})})})}function pe(e){var t=Object(l.e)(),n=e.label,r=e.href,a=e.hrefClient;return Object(A.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},onClick:function(){return a&&t.push(a)},children:Object(A.jsx)(ne.a,{style:{color:"inherit",textDecoration:"none"},href:r,target:"_blank",children:Object(A.jsx)(X.a,{color:"inherit",children:Object(A.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(A.jsx)(J.a,{style:{fontSize:"15px"},children:n})})})})})}function be(){var e=Object(s.c)((function(e){return e.common.network})),t=Object(s.b)(),n=Object(a.useState)(null),r=Object(G.a)(n,2),i=r[0],c=r[1],o=function(){c(null)};return Object(A.jsxs)("div",{style:{marginRight:"10px",fontSize:"15px",display:"flex",justifyContent:"center",flexDirection:"column"},children:[Object(A.jsxs)(X.a,{color:"inherit",onClick:function(e){return c(e.currentTarget)},children:[Object(A.jsx)(ie.a,{}),Object(A.jsx)(J.a,{style:{marginLeft:"5px",fontSize:"15px"},children:e.label})]}),Object(A.jsx)(te.a,{anchorEl:i,open:Boolean(i),onClose:o,style:{marginLeft:"12px",color:"white"},children:Object.keys(f.a).map((function(e){return Object(A.jsx)(le.a,{onClick:function(){o(),t({type:y.a.CommonSetNetwork,item:{network:f.a[e],networkKey:e}})},children:Object(A.jsx)(J.a,{children:f.a[e].label})},e)}))})]})}function ge(){Object(s.c)((function(e){return{showDisconnect:e.common.isWalletConnected}})).showDisconnect;var e=Object(s.b)(),t=Object(x.b)(),n=t.wallet,r=t.lockupClient,i=Object(d.b)().enqueueSnackbar;return Object(a.useEffect)((function(){n.on("disconnect",(function(){i("Disconnected from wallet",{variant:"info",autoHideDuration:2500}),e({type:y.a.CommonWalletDidDisconnect,item:{}}),e({type:y.a.CommonTriggerShutdown,item:{}})})),n.on("connect",Object(k.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:y.a.CommonWalletDidConnect,item:{}}),e({type:y.a.CommonTriggerBootstrap,item:{}});case 2:case"end":return t.stop()}}),t)}))))}),[n,e,i,r.provider.connection]),Object(A.jsxs)(ue.a,{children:[Object(A.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},onClick:function(){return n.disconnect()},children:Object(A.jsx)(ue.b,{})}),Object(A.jsx)("div",{onClick:function(){return n.connect()},style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(A.jsx)(ue.c,{})})]})}function je(){return Object(A.jsx)("div",{style:{zIndex:99,position:"fixed",width:"100%",bottom:0,textAlign:"center",height:"30px",backgroundColor:"#fbfbfb",borderTop:"solid 1pt #ccc",display:"flex",justifyContent:"space-between",paddingLeft:"10px",paddingRight:"10px"},children:Object(A.jsxs)("div",{style:{marginLeft:"auto",marginRight:"auto",display:"flex"},children:[Object(A.jsx)(ye,{href:"https://github.com/project-serum/anchor/blob/master/examples/lockup/docs/staking.md",label:"Technical Documentation"}),Object(A.jsx)(ye,{href:"https://github.com/project-serum/awesome-serum",label:"Developer Resources"}),Object(A.jsx)(ye,{href:"https://discord.com/channels/739225212658122886",label:"Discord"}),Object(A.jsx)(ye,{href:"https://t.me/ProjectSerum",label:"Telegram"}),Object(A.jsx)(ye,{href:"https://github.com/project-serum",label:"GitHub"}),Object(A.jsx)(ye,{href:"https://solanabeach.io/",label:"Solana Network",isEnd:!0})]})})}function ye(e){var t=e.label,n=e.href,r=e.isEnd;return Object(A.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginRight:r?"":"15px"},children:Object(A.jsx)(ne.a,{href:n,target:"_blank",color:"inherit",children:Object(A.jsx)(J.a,{style:{fontSize:"14px"},children:t})})})}function fe(e){var t=Object(s.c)((function(e){return{isAppReady:e.common.isWalletConnected&&e.common.bootstrapState===r.Bootstrapped}})).isAppReady,n=Object(a.useState)(!1),i=Object(G.a)(n,2),c=i[0],o=i[1];return Object(A.jsxs)("div",{style:{display:"flex",minHeight:"100vh",flexDirection:"column",backgroundColor:"rgb(251, 251, 251)"},children:[Object(A.jsx)("div",{style:{position:"fixed",width:"100%",zIndex:99},children:Object(A.jsx)(de,{isAppReady:t})}),Object(A.jsx)("div",{style:{width:"100%",marginTop:"94px",flex:1,display:"flex",marginBottom:"30px"},children:window.localStorage.getItem("consent")?t?Object(A.jsx)("div",{style:{width:"100%"},children:e.children}):Object(A.jsx)(xe,{}):Object(A.jsx)(ve,{onConsent:function(){window.localStorage.setItem("consent","true"),o(!c)}})}),Object(A.jsx)(je,{})]})}var he=Object(H.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function ve(e){var t=e.onConsent;return Object(A.jsxs)("div",{style:{flex:"1",display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center"},children:[Object(A.jsx)("div",{style:{width:"100%",display:"flex"},children:Object(A.jsx)("div",{style:{display:"flex",marginLeft:"auto",marginRight:"auto"},children:Object(A.jsx)(J.a,{style:{marginBottom:"16px",maxWidth:"1000px"},color:"textSecondary",variant:"h4",children:"The staking will be locked for 15 - 45 days , after that you can unstake any time."})})}),Object(A.jsx)("div",{style:{display:"flex",marginLeft:"auto",marginRight:"auto"},children:Object(A.jsx)(X.a,{variant:"contained",color:"primary",onClick:t,children:"I agree"})})]})}function xe(){var e=he(),t=Object(s.c)((function(e){return{network:e.common.network,isDisconnected:!e.common.isWalletConnected}})),n=t.network,r=t.isDisconnected;return Object(A.jsx)("div",{style:{flex:"1",display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center"},children:Object(A.jsx)("div",{style:{width:"100%",display:"flex"},children:r?Object(A.jsx)("div",{style:{display:"flex",marginLeft:"auto",marginRight:"auto"},children:Object(A.jsx)(J.a,{style:{marginLeft:"24px"},color:"textSecondary",variant:"h4",children:"Disconnected"})}):Object(A.jsx)("div",{style:{width:"100%"},children:Object(A.jsxs)("div",{style:{width:"100%"},className:e.root,children:[Object(A.jsx)("div",{children:Object(A.jsx)(J.a,{variant:"h5",children:"Connecting to ".concat(n.label,"...")})}),Object(A.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",width:"300px"},children:Object(A.jsx)(Z.a,{style:{width:"100%"}})})]})})})})}var Oe=n(369),we=n(374),ke=n(203),Se=n.n(ke),Ke=n(691),Me=n(378),Ce=n.n(Me),Pe=n(379),Te=n.n(Pe),Ae=n(697),Re=n(690),We=n(683),Ee=n(682),Le=n(641),Ie=n(392),De=n(677),Be=n(642),Ve=n(695),Ue=n(689),Ne=n(643),_e=n(645),ze=n(53),qe=n(105),Fe=n(66),Qe=n(394);function Ye(e){return Object.keys(e.common.network.registrars).map((function(t){return[t,{publicKey:e.common.network.registrars[t],account:e.accounts[e.common.network.registrars[t].toString()]}]})).filter((function(e){return void 0!==e[1].account})).filter((function(t){var n=Object(G.a)(t,2);n[0];return n[1].publicKey.equals(e.registry.registrar)})).map((function(e){var t=Object(G.a)(e,2);return{label:t[0],programAccount:t[1]}})).pop()}function Ge(){var e=Object(x.b)().registryClient,t=Object(s.c)((function(e){var t=Object.keys(e.common.network.registrars).map((function(t){return[t,{publicKey:e.common.network.registrars[t],account:e.accounts[e.common.network.registrars[t].toString()]}]})).filter((function(e){return void 0!==e[1].account})),n=t.filter((function(t){var n=Object(G.a)(t,2);n[0];return n[1].publicKey.equals(e.registry.registrar)})).map((function(e){var t=Object(G.a)(e,2);return{label:t[0],programAccount:t[1]}})).pop();return{network:e.common.network,accounts:e.accounts,registrars:t,selectedRegistrar:n}})),n=t.registrars,r=t.selectedRegistrar,a=t.accounts,i=t.network,c=Object(s.b)(),o=Object(Y.e)();return Object(A.jsx)(Qe.a,{style:{width:"294px",height:"36px"},variant:"outlined",fullWidth:!0,value:r.label,onChange:function(){var t=Object(k.a)(w.a.mark((function t(i){var o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n.filter((function(e){var t=Object(G.a)(e,2),n=t[0];t[1];return n===i.target.value})).map((function(e){var t=Object(G.a)(e,2);t[0];return t[1]})).pop(),L(e,a,c,o.publicKey,r.programAccount.publicKey);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:0===n.length?Object(A.jsx)(le.a,{value:"_loading",children:"Loading registrars..."}):n.map((function(e){var t=Object(G.a)(e,2),n=t[0],r=t[1];return Object(A.jsx)(le.a,{value:n,children:Object(A.jsxs)("div",{style:{display:"flex"},children:[Object(A.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:He(o.get(r.account.mint.toString()))}),Object(A.jsx)("div",{style:{overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"center"},children:"".concat(Je(r,i))})]})},n)}))})}function Je(e,t){var n=Object.keys(t.registrars).filter((function(n){return t.registrars[n].equals(e.publicKey)})).pop();return void 0!==n?n.toUpperCase():e.publicKey.toString()}function He(e,t){return e?Object(A.jsx)("img",{alt:"Token Icon",style:null!==t&&void 0!==t?t:{marginRight:"10px",height:"25px"},src:e.logoURI}):Object(A.jsx)("div",{style:{marginLeft:"32px"}})}var Ze=n(263),Xe=n(390),$e=n(637),et=n(639),tt=n(81),nt=n(688),rt=n(638),at=n(391);function it(){var e=Object(s.c)((function(e){return{member:e.registry.member}})).member;return Object(A.jsx)("div",{style:{display:"flex",width:"100%"},children:Object(A.jsx)("div",{style:{flex:1,marginTop:"24px",marginBottom:"24px"},children:e&&Object(A.jsx)(ct,{})})})}function ct(){var e=Object(s.c)((function(e){var t=e.accounts[e.registry.member.toString()],n=e.accounts[e.registry.registrar.toString()];return{registrar:n,mint:e.accounts[n.mint.toString()],vault:e.accounts[t.balances.vault],vaultStake:e.accounts[t.balances.vaultStake],vaultPw:e.accounts[t.balances.vaultPw],spt:e.accounts[t.balances.spt],lockedVault:e.accounts[t.balancesLocked.vault],lockedVaultStake:e.accounts[t.balancesLocked.vaultStake],lockedVaultPw:e.accounts[t.balancesLocked.vaultPw],lockedSpt:e.accounts[t.balancesLocked.spt]}})),t=e.mint,n=e.registrar,r=e.vault,a=e.vaultStake,i=e.vaultPw,c=e.spt,o=e.lockedVault,u=e.lockedVaultStake,l=e.lockedVaultPw,d=e.lockedSpt,m=[{title:"Main Balances",description:"Balances deposited directly from the connected wallet.",rows:[{token:Object(Y.d)(n.mint),balance:Object(Y.c)(r.amount,t.decimals),stake:Object(Y.c)(a.amount,t.decimals),pending:Object(Y.c)(i.amount,t.decimals),spt:Object(Y.c)(c.amount,0)}]},{title:"Locked Balances",description:"Balances deposited from the lockup program. These funds are isolated from the Main Balances and may only be withdrawn back to the lockup program. At all times they are program controlled.",rows:[{token:Object(Y.d)(n.mint),balance:Object(Y.c)(o.amount,t.decimals),stake:Object(Y.c)(u.amount,t.decimals),pending:Object(Y.c)(l.amount,t.decimals),spt:Object(Y.c)(d.amount,0)}]}];return Object(A.jsx)(Ze.a,{style:{marginBottom:"24px"},children:Object(A.jsx)(Xe.a,{style:{marginTop:"24px",position:"relative",paddingTop:0,paddingBottom:"16px"},children:m.map((function(e){return Object(A.jsx)(ot,{title:e.title,description:e.description,rows:e.rows},e.title)}))})})}function ot(e){var t=e.title,n=e.rows,r=e.description;return Object(A.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(A.jsx)(J.a,{style:{fontWeight:"bold"},children:t}),Object(A.jsx)(J.a,{color:"textSecondary",style:{fontSize:"14px"},children:r}),Object(A.jsx)(nt.a,{children:Object(A.jsxs)($e.a,{children:[Object(A.jsx)(rt.a,{children:Object(A.jsxs)(at.a,{children:[Object(A.jsx)(tt.a,{children:"Token"}),Object(A.jsx)(tt.a,{align:"right",children:"Available"}),Object(A.jsx)(tt.a,{align:"right",children:"Pending"}),Object(A.jsx)(tt.a,{align:"right",children:"Staked"}),Object(A.jsx)(tt.a,{align:"right",children:"Pool"})]})}),Object(A.jsx)(et.a,{children:null===n?Object(A.jsx)(se.a,{}):n.map((function(e){return Object(A.jsxs)(at.a,{children:[Object(A.jsx)(tt.a,{component:"th",scope:"row",children:e.token}),Object(A.jsx)(tt.a,{align:"right",children:e.balance}),Object(A.jsx)(tt.a,{align:"right",children:e.pending}),Object(A.jsx)(tt.a,{align:"right",children:e.stake}),Object(A.jsx)(tt.a,{align:"right",children:e.spt})]},e.token)}))})]})})]})}function st(e,t){return ut.apply(this,arguments)}function ut(){return(ut=Object(k.a)(w.a.mark((function e(t,n){var r,a,i,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.e.PublicKey.findProgramAddress([n.toBuffer()],t);case 2:return r=e.sent,a=Object(G.a)(r,2),i=a[0],c=a[1],e.abrupt("return",{publicKey:i,nonce:c});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt,dt,mt,pt=n(370),bt=n(388),gt=n(260),jt=n(26),yt=n(37),ft=n.n(yt),ht=n(647);function vt(){var e=Object(a.useState)(!1),t=Object(G.a)(e,2),n=t[0],r=t[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{onClick:function(){return r(!0)},children:Object(A.jsx)(X.a,{variant:"contained",color:"secondary",children:"Drop Rewards"})}),Object(A.jsx)(xt,{open:n,onClose:function(){return r(!1)}})]})}function xt(e){var t=e.open,n=e.onClose,r=Object(s.c)((function(e){return{selectedRegistrar:Ye(e)}})).selectedRegistrar,i=Object(a.useState)(lt.Unlocked),c=Object(G.a)(i,2),o=c[0],u=c[1];return Object(A.jsxs)(Ae.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"md",children:[Object(A.jsx)(Ee.a,{children:Object(A.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(A.jsx)(J.a,{variant:"h4",component:"h2",children:"Drop Rewards on ".concat(r.label.toUpperCase()," Stakers")})})}),Object(A.jsxs)(We.a,{children:[Object(A.jsxs)(Ve.a,{value:o,onChange:function(e,t){return u(t)},children:[Object(A.jsx)(Ue.a,{value:lt.Unlocked,label:"Unlocked"}),Object(A.jsx)(Ue.a,{value:lt.Locked,label:"Locked"})]}),o===lt.Unlocked&&Object(A.jsx)(Ot,{onClose:n}),o===lt.Locked&&Object(A.jsx)(wt,{onClose:n})]})]})}function Ot(e){var t=e.onClose,n=Object(d.b)(),r=Object(x.b)().registryClient,i=Object(s.c)((function(e){return{network:e.common.network,registrar:{publicKey:e.registry.registrar,account:e.accounts[e.registry.registrar.toString()]},accounts:e.accounts}})),c=i.network,o=i.registrar,u=i.accounts,l=Object(a.useState)(null),m=Object(G.a)(l,2),p=m[0],b=m[1],g=Object(a.useState)(null),j=Object(G.a)(g,2),y=j[0],f=j[1],h=Object(a.useState)(null),v=Object(G.a)(h,2),O=v[0],S=v[1],M=Object(a.useState)(null),P=Object(G.a)(M,2),T=P[0],R=P[1],W=null!==T&&null!==O&&null!==p&&p>=100&&null!==y,E=function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.b(n,"Dropping unlocked reward...","Unlocked reward dropped",Object(k.a)(w.a.mark((function e(){var t,n,a,i,s,l,d,m,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u[c.mints[T].toString()]){e.next=5;break}return e.next=4,C.getMintInfo(r.provider,c.mints[T]);case 4:t=e.sent;case 5:return n=Object(Y.b)(p,t.decimals),a={unlocked:{}},i=new K.Account,s=new K.Account,e.next=11,K.PublicKey.findProgramAddress([o.publicKey.toBuffer(),i.publicKey.toBuffer()],r.programId);case 11:return l=e.sent,d=Object(G.a)(l,2),m=d[0],b=d[1],e.t0=r.rpc,e.t1=a,e.t2=n,e.t3=new ft.a(y),e.t4=r.provider.wallet.publicKey,e.t5=b,e.t6={registrar:o.publicKey,rewardEventQ:o.account.rewardEventQ,poolMint:o.account.poolMint,vendor:i.publicKey,vendorVault:s.publicKey,depositor:O,depositorAuthority:r.provider.wallet.publicKey,tokenProgram:ze.TokenInstructions.TOKEN_PROGRAM_ID,clock:K.SYSVAR_CLOCK_PUBKEY,rent:K.SYSVAR_RENT_PUBKEY},e.t7=[s,i],e.t8=[],e.t9=jt.a,e.next=27,C.createTokenAccountInstrs(r.provider,s.publicKey,c.mints[T],m);case 27:return e.t10=e.sent,e.t11=(0,e.t9)(e.t10),e.next=31,r.account.rewardVendor.createInstruction(i);case 31:return e.t12=e.sent,e.t13=[e.t12],e.t14=e.t8.concat.call(e.t8,e.t11,e.t13),e.t15={accounts:e.t6,signers:e.t7,instructions:e.t14},e.next=37,e.t0.dropReward.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t15);case 37:return e.abrupt("return",e.sent);case 38:case"end":return e.stop()}}),e)}))));case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)(kt,{network:c,mint:T,setMint:R,setDepositor:S,setRewardDisplayAmount:b,expiryTs:y,setExpiryTs:f,onCancel:t,onClick:function(){E().catch((function(e){console.error(e),n.enqueueSnackbar("Error dropping unlocked reward: ".concat(e.toString()),{variant:"error"})}))},isSendEnabled:W})}function wt(e){var t=e.onClose,n=Object(d.b)(),r=Object(x.b)().registryClient,i=Object(s.c)((function(e){return{network:e.common.network,registrar:{publicKey:e.registry.registrar,account:e.accounts[e.registry.registrar.toString()]},accounts:e.accounts}})),c=i.network,o=i.registrar,u=i.accounts,l=Object(a.useState)(null),m=Object(G.a)(l,2),p=m[0],b=m[1],g=Object(a.useState)(null),j=Object(G.a)(g,2),y=j[0],f=j[1],h=Object(a.useState)(null),v=Object(G.a)(h,2),O=v[0],S=v[1],M=Object(a.useState)(null),P=Object(G.a)(M,2),T=P[0],R=P[1],W=Object(a.useState)(null),E=Object(G.a)(W,2),L=E[0],I=E[1],D=Object(a.useState)(null),B=Object(G.a)(D,2),V=B[0],U=B[1],N=Object(a.useState)(7),_=Object(G.a)(N,2),z=_[0],q=_[1],F=null!==y&&null!==O&&null!==V&&null!==L&&null!==p&&p>=100&&null!==T,Q=function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.b(n,"Dropping locked reward...","Locked reward dropped",Object(k.a)(w.a.mark((function e(){var t,n,a,i,s,l,d,m,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={locked:{startTs:new ft.a(y),endTs:new ft.a(O),periodCount:new ft.a(z)}},n=new K.Account,a=new K.Account,e.next=5,K.PublicKey.findProgramAddress([o.publicKey.toBuffer(),n.publicKey.toBuffer()],r.programId);case 5:return i=e.sent,s=Object(G.a)(i,2),l=s[0],d=s[1],m=u[c.mints[V].toString()],b=Object(Y.b)(p,m.decimals),e.t0=r.rpc,e.t1=t,e.t2=b,e.t3=new ft.a(T),e.t4=r.provider.wallet.publicKey,e.t5=d,e.t6={registrar:o.publicKey,rewardEventQ:o.account.rewardEventQ,poolMint:o.account.poolMint,vendor:n.publicKey,vendorVault:a.publicKey,depositor:L,depositorAuthority:r.provider.wallet.publicKey,tokenProgram:ze.TokenInstructions.TOKEN_PROGRAM_ID,clock:K.SYSVAR_CLOCK_PUBKEY,rent:K.SYSVAR_RENT_PUBKEY},e.t7=[a,n],e.t8=[],e.t9=jt.a,e.next=23,C.createTokenAccountInstrs(r.provider,a.publicKey,c.mints[V],l);case 23:return e.t10=e.sent,e.t11=(0,e.t9)(e.t10),e.next=27,r.account.rewardVendor.createInstruction(n);case 27:return e.t12=e.sent,e.t13=[e.t12],e.t14=e.t8.concat.call(e.t8,e.t11,e.t13),e.t15={accounts:e.t6,signers:e.t7,instructions:e.t14},e.next=33,e.t0.dropReward.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t15);case 33:return e.abrupt("return",e.sent);case 34:case"end":return e.stop()}}),e)}))));case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)(kt,{network:c,mint:V,setMint:U,setDepositor:I,setRewardDisplayAmount:b,setStartTs:f,setEndTs:S,periodCount:z,setPeriodCount:q,expiryTs:T,setExpiryTs:R,onCancel:t,onClick:function(){Q().catch((function(e){n.enqueueSnackbar("Error dropping locked reward: ".concat(e.toString()),{variant:"error"})}))},isSendEnabled:F})}function kt(e){var t=e.network,n=e.mint,r=e.setDepositor,a=e.setMint,i=e.setRewardDisplayAmount,c=e.setStartTs,o=e.setEndTs,s=e.periodCount,u=e.setPeriodCount,l=e.expiryTs,d=e.setExpiryTs,m=e.onCancel,p=e.onClick,b=e.isSendEnabled,g=Object.keys(t.mints).map((function(e){return{label:e,publicKey:t.mints[e]}}));return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{style:{display:"flex",marginTop:"10px"},children:[Object(A.jsxs)("div",{style:{flex:1},children:[Object(A.jsx)(qe.a,{style:{height:"100%"},mint:null===n?void 0:t.mints[n],onChange:function(e){return r(e)}}),Object(A.jsx)(Be.a,{children:"Account to send from"})]}),Object(A.jsx)("div",{children:Object(A.jsxs)(Ie.a,{variant:"outlined",style:{width:"200px",marginLeft:"10px",marginTop:"10px"},children:[Object(A.jsx)(ht.a,{children:"Mint"}),Object(A.jsx)(Qe.a,{value:n,onChange:function(e){return a(e.target.value)},label:"Mint",children:g.map((function(e){return Object(A.jsx)(le.a,{value:e.label,children:e.label.toUpperCase()})}))})]})}),Object(A.jsx)("div",{children:Object(A.jsx)(Le.a,{style:{marginLeft:"10px",marginTop:"10px"},id:"outlined-number",label:"Amount",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return i(parseFloat(e.target.value))},InputProps:{inputProps:{min:0}}})})]}),void 0!==o&&void 0!==c&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{style:{display:"flex",marginTop:"37px"},children:Object(A.jsxs)("div",{style:{flex:1},children:[Object(A.jsx)(Le.a,{fullWidth:!0,label:"Start date",type:"datetime-local",InputLabelProps:{shrink:!0},onChange:function(e){var t=new Date(e.target.value);c(t.getTime()/1e3)}}),Object(A.jsx)(Be.a,{children:"Date vesting begins"})]})}),Object(A.jsxs)("div",{style:{flex:1,marginTop:"20px"},children:[Object(A.jsx)(Le.a,{fullWidth:!0,label:"End date",type:"datetime-local",InputLabelProps:{shrink:!0},onChange:function(e){var t=new Date(e.target.value);o(t.getTime()/1e3)}}),Object(A.jsx)(Be.a,{children:"Date the vesting account is fully vested"})]}),Object(A.jsx)("div",{children:Object(A.jsx)(Ie.a,{fullWidth:!0,children:Object(A.jsx)(Le.a,{style:{marginTop:"37px"},id:"outlined-number",label:"Period Count",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:s,onChange:function(e){return u(parseInt(e.target.value))},InputProps:{inputProps:{min:1}}})})})]}),Object(A.jsxs)("div",{style:{marginTop:"37px",display:"flex"},children:[Object(A.jsxs)("div",{style:{flex:1,height:"100%",marginRight:"10px"},children:[Object(A.jsx)(Le.a,{fullWidth:!0,label:"Expiry date",type:"datetime-local",InputLabelProps:{shrink:!0},onChange:function(e){var t=new Date(e.target.value);d(t.getTime()/1e3)}}),Object(A.jsx)(Be.a,{children:"Date after which the account owner dropping rewards can withdraw all unclaimed rewards."})]}),Object(A.jsx)("div",{style:{marginTop:"26px"},children:Object(A.jsx)(Le.a,{style:{height:"100%"},disabled:!0,placeholder:"Expiry Unix timestamp",fullWidth:!0,value:l})})]})]}),Object(A.jsxs)(Re.a,{children:[Object(A.jsx)(X.a,{onClick:m,children:"Cancel"}),Object(A.jsx)(X.a,{onClick:p,type:"submit",color:"primary",disabled:!b,children:"Send"})]})]})}function St(e){var t=Object(x.b)(),n=t.registryClient,r=t.lockupClient,i=Object(s.c)((function(e){return{registrar:{publicKey:e.registry.registrar,account:e.accounts[e.registry.registrar.toString()]},member:e.registry.member?{publicKey:e.registry.member,account:e.accounts[e.registry.member.toString()]}:void 0}})),c=i.member,o=i.registrar,u=e.rli,l=Object(s.b)(),m=Object(d.b)(),p=Object(a.useState)(null),b=Object(G.a)(p,2),g=b[0],f=b[1],h=function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fe.b(m,"Processing vendor reward ".concat(u.vendor.publicKey.toString()),"Reward processed",Object(k.a)(w.a.mark((function e(){var t,a,i,s,d,m,p,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.account.rewardVendor(u.vendor.publicKey);case 2:return t=e.sent,e.next=5,Object(T.f)(n.programId,o.publicKey,u.vendor.publicKey);case 5:if(a=e.sent,!u.reward.locked){e.next=45;break}return i=new K.Account,s=new K.Account,e.next=11,st(r.programId,i.publicKey);case 11:return d=e.sent,m=r.instruction.createVesting.accounts({vesting:i.publicKey,vault:s.publicKey,depositor:t.vault,depositorAuthority:a.publicKey,tokenProgram:ze.TokenInstructions.TOKEN_PROGRAM_ID,rent:K.SYSVAR_RENT_PUBKEY,clock:K.SYSVAR_CLOCK_PUBKEY}).map((function(e){return e.pubkey.equals(a.publicKey)?Object(j.a)(Object(j.a)({},e),{},{isSigner:!1}):e})),e.t0=n.rpc,e.t1=d.nonce,e.next=17,n.state.address();case 17:return e.t2=e.sent,e.t3=r.programId,e.t4={registrar:o.publicKey,member:c.publicKey,beneficiary:n.provider.wallet.publicKey,balances:c.account.balances,balancesLocked:c.account.balancesLocked,vendor:u.vendor.publicKey,vault:u.vendor.account.vault,vendorSigner:a.publicKey,tokenProgram:ze.TokenInstructions.TOKEN_PROGRAM_ID,clock:K.SYSVAR_CLOCK_PUBKEY},e.t5={registry:e.t2,lockupProgram:e.t3,cmn:e.t4},e.t6=m,e.t7=[i,s],e.next=25,r.account.vesting.createInstruction(i);case 25:return e.t9=e.sent,e.t8=[e.t9],e.t10=jt.a,e.next=30,Object(C.createTokenAccountInstrs)(n.provider,s.publicKey,u.vendor.account.mint,d.publicKey);case 30:return e.t11=e.sent,e.t12=(0,e.t10)(e.t11),e.t13=e.t8.concat.call(e.t8,e.t12),e.t14={accounts:e.t5,remainingAccounts:e.t6,signers:e.t7,instructions:e.t13},e.next=36,e.t0.claimRewardLocked.call(e.t0,e.t1,e.t14);case 36:return p=e.sent,e.next=39,r.account.vesting.all(n.provider.wallet.publicKey.toBuffer());case 39:return(b=e.sent).forEach((function(e){l({type:y.a.AccountAdd,item:{account:e}})})),l({type:y.a.LockupSetVestings,item:{vestingAccounts:b.map((function(e){return e.publicKey}))}}),e.abrupt("return",p);case 45:return e.next=47,n.rpc.claimReward({accounts:{to:g,cmn:{registrar:o.publicKey,member:c.publicKey,beneficiary:n.provider.wallet.publicKey,balances:c.account.balances,balancesLocked:c.account.balancesLocked,vendor:u.vendor.publicKey,vault:t.vault,vendorSigner:a.publicKey,tokenProgram:ze.TokenInstructions.TOKEN_PROGRAM_ID,clock:K.SYSVAR_CLOCK_PUBKEY}}});case 47:return e.abrupt("return",e.sent);case 48:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[!u.reward.locked&&Object(A.jsx)("div",{children:Object(A.jsx)(qe.a,{style:{width:"400px",height:"100%"},mint:u.vendor.account.mint,onChange:function(e){return f(e)}})}),Object(A.jsx)("div",{style:{marginLeft:"10px",marginRight:"10px"},children:Object(A.jsx)(X.a,{disabled:u.reward.unlockedAlloc&&null===g,variant:"contained",color:"primary",onClick:function(){return h().catch((function(e){console.error(e),m.enqueueSnackbar("Error ending pending redemption: ".concat(e.toString()),{variant:"error"})}))},children:"Process Reward"})})]})}function Kt(){var e=Object(x.b)().registryClient,t=Object(s.b)(),n=Object(d.b)(),r=Object(s.c)((function(e){var t=e.accounts[e.registry.registrar.toString()],n={publicKey:t.rewardEventQ,account:e.accounts[t.rewardEventQ.toString()]};return{accounts:e.accounts,rewardEventQueue:n,member:e.registry.member?{publicKey:e.registry.member,account:e.accounts[e.registry.member.toString()]}:void 0,network:e.common.network}})),i=r.rewardEventQueue,c=Object(a.useMemo)((function(){return Object(T.e)(i.account)}),[i.account]);Object(a.useEffect)((function(){Object(k.a)(w.a.mark((function r(){return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P.d.getMultipleAccounts(e.provider.connection,c.map((function(e){return e.vendor})));case 2:r.sent.forEach((function(r){if(null!==r){var a=e.coder.accounts.decode("RewardVendor",r.account.data);t({type:y.a.AccountAdd,item:{account:{publicKey:r.publicKey,account:a}}})}else n.enqueueSnackbar("RPC node returned invalid vendor account",{variant:"error"})}));case 4:case"end":return r.stop()}}),r)})))()}),[c,t,n,e.coder.accounts,e.provider.connection]);var o=c.map((function(e){return gt.a.fromMessage(r,e)})).reverse(),u=null;return 0===o.filter((function(e){return null===e})).length&&(u=o.filter((function(e){return e.needsClaim})).sort((function(e,t){return e.cursor<t.cursor?-1:e.cursor>t.cursor?1:0})).shift()),Object(A.jsxs)("div",{style:{width:"100%",marginTop:"24px"},children:[u&&Object(A.jsx)(Ze.a,{style:{marginBottom:"24px"},children:Object(A.jsx)(Xe.a,{children:Object(A.jsxs)(J.a,{variant:"h6",children:['You were staked during a previous reward. To prove eligibility, click the "Process" button until you\'ve processed ',Object(A.jsx)("b",{children:"all"})," ","eligible rewards. For unlocked rewards, don't forget to select the address you wish to send your stake reward to."]})})}),Object(A.jsxs)("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[Object(A.jsx)(J.a,{style:{fontWeight:"bold",fontSize:"20px"},children:"Reward History"}),Object(A.jsxs)("div",{style:{display:"flex"},children:[u&&Object(A.jsx)(St,{rli:u}),localStorage.getItem("private")&&Object(A.jsx)(vt,{})]})]}),Object(A.jsx)("div",{style:{marginBottom:"16px"},children:Object(A.jsxs)(J.a,{children:["When rewards are dropped, one must prove one was staked during the time of drop. This means sending a transaction to the staking program to ",Object(A.jsx)("b",{children:"process"})," the reward. For ",Object(A.jsx)("b",{children:"unlocked"})," rewards, select the token address to transfer the reward to. For ",Object(A.jsx)("b",{children:"locked"})," rewards, a locked vesting account will be created and realized to the staker upon unstaking. See the Lockup tab."]})}),Object(A.jsx)(bt.a,{children:Object(A.jsx)(gt.b,{rewards:o})})]})}function Mt(e){var t=e.mint,n=e.decimals,r=e.variant,i=e.onChange,c=e.style,o=e.deposit,u=Object(s.c)((function(e){return t?e.lockup.vestings.map((function(t){return{publicKey:t,account:e.accounts[t.toString()]}})).filter((function(e){return e.account.mint.equals(t)})):[]})),l=Object(a.useState)(""),d=Object(G.a)(l,2),m=d[0],p=d[1];return Object(A.jsx)(Qe.a,{style:c,variant:r,fullWidth:!0,value:m,onChange:function(e){var t=e.target.value;p(t);var n=new K.PublicKey(t),r=u.filter((function(e){return e.publicKey.equals(n)})).pop();i(n,Ct(r,o))},children:0===u.length?Object(A.jsx)(le.a,{value:"",children:"No vesting accounts found"}):u.map((function(e){return Object(A.jsx)(le.a,{value:e.publicKey.toString(),children:Object(A.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:[Object(A.jsx)("div",{children:"".concat(e.publicKey.toString())}),Object(A.jsx)("div",{style:{float:"right",color:"#ccc"},children:"".concat(Object(Y.c)(Ct(e,o),n))})]})})}))})}function Ct(e,t){return t?e.account.outstanding.sub(e.account.whitelistOwned):e.account.whitelistOwned}function Pt(){var e=Object(a.useState)(mt.Me),t=Object(G.a)(e,2),n=t[0],r=t[1];return Object(A.jsxs)("div",{children:[Object(A.jsx)(Tt,{setTab:r}),Object(A.jsxs)(Ke.a,{fixed:!0,maxWidth:"md",style:{flex:1,display:"flex"},children:[n===mt.Me&&Object(A.jsx)(it,{}),n===mt.Stake&&Object(A.jsx)(pt.a,{}),n===mt.Rewards&&Object(A.jsx)(Kt,{})]})]})}function Tt(e){var t=Object(a.useState)(mt.Me),n=Object(G.a)(t,2),r=n[0],i=n[1],c=Object(s.c)((function(e){return{member:e.registry.member,registrar:e.registry.registrar,registrarAccount:e.accounts[e.registry.registrar.toString()]}})),o=c.member,u=c.registrar,l=c.registrarAccount,m=Object(a.useState)(!1),p=Object(G.a)(m,2),b=p[0],g=p[1],j=Object(a.useState)(!1),f=Object(G.a)(j,2),h=f[0],v=f[1],O=Object(d.b)(),S=O.enqueueSnackbar,M=O.closeSnackbar,C=Object(x.b)(),P=C.wallet,R=C.registryClient,W=Object(s.b)(),E=function(){var e=Object(k.a)(w.a.mark((function e(){var t,n,r,a,i,c,o,s,d,m,p,b,g,j,f,h,v,x,O;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S("Creating stake account",{variant:"info"}),e.next=3,Object(T.b)(u);case 3:return t=e.sent,e.next=6,K.PublicKey.createWithSeed(P.publicKey,t,R.programId);case 6:return n=e.sent,e.next=9,Object(T.c)(R.programId,u,n);case 9:return r=e.sent,a=r.publicKey,i=r.nonce,c=a,e.next=15,Object(T.a)(R.provider,l,c);case 15:return o=e.sent,s=Object(G.a)(o,2),d=s[0],m=s[1],e.next=21,Object(T.a)(R.provider,l,c);case 21:return p=e.sent,b=Object(G.a)(p,2),g=b[0],j=b[1],e.t0=R.transaction,e.t1=i,e.t2={registrar:u,member:n,beneficiary:P.publicKey,memberSigner:c,balances:m,balancesLocked:j,tokenProgram:ze.TokenInstructions.TOKEN_PROGRAM_ID,rent:K.SYSVAR_RENT_PUBKEY},e.t3=K.SystemProgram,e.t4=P.publicKey,e.t5=n,e.t6=P.publicKey,e.t7=t,e.next=35,R.provider.connection.getMinimumBalanceForRentExemption(R.account.member.size);case 35:return e.t8=e.sent,e.t9=R.account.member.size,e.t10=R.programId,e.t11={fromPubkey:e.t4,newAccountPubkey:e.t5,basePubkey:e.t6,seed:e.t7,lamports:e.t8,space:e.t9,programId:e.t10},e.t12=e.t3.createAccountWithSeed.call(e.t3,e.t11),e.t13=[e.t12],e.t14={accounts:e.t2,instructions:e.t13},f=e.t0.createMember.call(e.t0,e.t1,e.t14),h=[d,g,{tx:f,signers:[]}],e.next=47,R.provider.sendAll(h,{commitment:"recent",preflightCommitment:"recent",skipPreflight:!0});case 47:return v=e.sent,console.log("Accounts created with transactions:",v),e.next=51,R.account.member(n);case 51:return x=e.sent,O={publicKey:n,account:x},W({type:y.a.AccountAdd,item:{account:O}}),e.next=56,U(O,W,R.provider.connection);case 56:V(O,R,W),W({type:y.a.RegistrySetMember,item:{member:n}}),M(),S("Stake account created ".concat(n.toString()),{variant:"success"});case 60:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=we.a.span(dt||(dt=Object(Oe.a)(["\n    :hover {\n      cursor: pointer;\n    }\n  "])));return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{style:{backgroundColor:"#fff",paddingTop:"24px",borderBottom:"solid 1pt #ccc"},children:[Object(A.jsxs)(Ke.a,{fixed:!0,maxWidth:"md",style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(A.jsx)("div",{children:Object(A.jsx)(J.a,{variant:"h4",style:{marginBottom:"10px"},children:"My Stake"})}),Object(A.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(A.jsx)(Ge,{})})]}),Object(A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(A.jsx)("div",{children:Object(A.jsx)(J.a,{children:void 0!==o?o.toString():Object(A.jsxs)(A.Fragment,{children:["Account not found. Please"," ",Object(A.jsx)(L,{onClick:function(){E().catch((function(e){console.error(e),S("Error creating stake account: ".concat(e.toString()),{variant:"error"})}))},style:{color:"black",fontWeight:"bold",textDecoration:"underline"},children:"create"})," ","a stake account."]})})}),Object(A.jsx)("div",{children:Object(A.jsxs)("div",{children:[Object(A.jsxs)(X.a,{disabled:void 0===o,onClick:function(){return g(!0)},variant:"outlined",color:"primary",style:{marginRight:"10px"},children:[Object(A.jsx)(Ce.a,{style:{fontSize:"20px"}}),Object(A.jsx)(J.a,{style:{marginLeft:"5px",marginRight:"5px"},children:"Deposit"})]}),Object(A.jsxs)(X.a,{disabled:void 0===o,variant:"outlined",color:"primary",onClick:function(){return v(!0)},children:[Object(A.jsx)(Te.a,{style:{fontSize:"20px"}}),Object(A.jsx)(J.a,{style:{marginLeft:"5px",marginRight:"5px"},children:"Withdraw"})]})]})})]})]}),Object(A.jsx)("div",{style:{maxWidth:"960px",marginLeft:"auto",marginRight:"auto",paddingLeft:"24px",paddingRight:"24px",marginTop:"10px"},children:Object(A.jsxs)(Ve.a,{value:r,onChange:function(t,n){i(n),e.setTab(n)},children:[Object(A.jsx)(Ue.a,{value:mt.Me,label:"Me"}),Object(A.jsx)(Ue.a,{value:mt.Stake,label:"Stake"}),Object(A.jsx)(Ue.a,{value:mt.Rewards,label:"Rewards"})]})})]}),void 0!==o&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(At,{open:b,onClose:function(){return g(!1)}}),Object(A.jsx)(Rt,{open:h,onClose:function(){return v(!1)}})]})]})}function At(e){var t=e.open,n=e.onClose,r=Object(d.b)(),a=r.enqueueSnackbar,i=r.closeSnackbar,c=Object(x.b)(),o=c.registryClient,u=c.lockupClient,l=Object(s.b)(),m=Object(s.c)((function(e){var t=void 0;e.registry.member&&(t=e.accounts[e.registry.member.toString()]);var n=e.accounts[e.registry.registrar.toString()],r={publicKey:e.registry.registrar,account:n};return{registrar:r,memberAccount:t,member:e.registry.member,mintAccount:e.accounts[r.account.mint.toString()],accounts:e.accounts}})),p=m.registrar,b=m.member,g=m.memberAccount,j=m.mintAccount,f=m.accounts;return Object(A.jsx)(Wt,{deposit:!0,title:"Deposit",contextText:"Select the amount to deposit",open:t,onClose:n,onTransfer:function(){var e=Object(k.a)(w.a.mark((function e(t,r,c){var s,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(Y.b)(r,j.decimals),a("Depositing ".concat(r," ").concat(Object(Y.d)(p.account.mint)," from ").concat(t.toString()),{variant:"info"}),e.next=4,Object(k.a)(w.a.mark((function e(){var n,r,a,i,d,m,j,h,v;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=45;break}return n=o.coder.instruction.encode("deposit_locked",{amount:s}),r=f[t.toString()],e.next=5,Object(T.c)(o.programId,p.publicKey,b);case 5:return a=e.sent.publicKey,e.next=8,st(u.programId,t);case 8:return i=e.sent.publicKey,e.next=11,o.state.address();case 11:return e.t0=e.sent,e.t1={pubkey:e.t0,isWritable:!1,isSigner:!1},e.t2={pubkey:p.publicKey,isWritable:!1,isSigner:!1},e.t3={pubkey:b,isWritable:!1,isSigner:!1},e.t4={pubkey:o.provider.wallet.publicKey,isWritable:!1,isSigner:!0},d=[e.t1,e.t2,e.t3,e.t4],e.t5=u.rpc,e.t6=n,e.t7=s,e.next=22,u.state.address();case 22:return e.t8=e.sent,e.t9=o.provider.wallet.publicKey,e.t10=o.programId,e.t11=t,e.t12=r.vault,e.t13=i,e.t14=ze.TokenInstructions.TOKEN_PROGRAM_ID,e.t15=g.balancesLocked.vault,e.t16=a,e.t17={lockup:e.t8,beneficiary:e.t9,whitelistedProgram:e.t10,vesting:e.t11,vault:e.t12,vestingSigner:e.t13,tokenProgram:e.t14,whitelistedProgramVault:e.t15,whitelistedProgramVaultAuthority:e.t16},e.t18={transfer:e.t17},e.t19=d,e.t20={accounts:e.t18,remainingAccounts:e.t19},e.next=37,e.t5.whitelistWithdraw.call(e.t5,e.t6,e.t7,e.t20);case 37:return m=e.sent,e.next=40,u.account.vesting(t);case 40:return j=e.sent,l({type:y.a.LockupUpdateVesting,item:{vesting:{publicKey:t,account:j}}}),e.abrupt("return",m);case 45:return e.next=47,o.rpc.deposit(s,{accounts:{depositor:t,depositorAuthority:o.provider.wallet.publicKey,tokenProgram:ze.TokenInstructions.TOKEN_PROGRAM_ID,vault:g.balances.vault,beneficiary:o.provider.wallet.publicKey,member:b}});case 47:return h=e.sent,e.next=50,Object(C.getTokenAccount)(o.provider,t);case 50:return v=e.sent,l({type:y.a.CommonOwnedTokenAccountsUpdate,item:{account:{publicKey:t,account:v}}}),e.abrupt("return",h);case 53:case"end":return e.stop()}}),e)})))();case 4:d=e.sent,i(),a("Deposit complete",{variant:"success",action:Object(A.jsx)(Fe.a,{signature:d})}),n();case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()})}function Rt(e){var t=e.open,n=e.onClose,r=Object(x.b)(),a=r.registryClient,i=r.lockupClient,c=Object(d.b)(),o=c.enqueueSnackbar,u=c.closeSnackbar,l=Object(s.b)(),m=Object(s.c)((function(e){var t=void 0;e.registry.member&&(t=e.accounts[e.registry.member.toString()]);var n=e.accounts[e.registry.registrar.toString()];return{registrar:e.registry.registrar,registrarAccount:n,member:e.registry.member,memberAccount:t,mintAccount:e.accounts[n.mint.toString()],accounts:e.accounts}})),p=m.registrar,b=m.registrarAccount,g=m.member,j=m.memberAccount,f=m.mintAccount,h=m.accounts;return Object(A.jsx)(Wt,{title:"Withdraw",contextText:"Select the amount to withdraw",open:t,onClose:n,onTransfer:function(){var e=Object(k.a)(w.a.mark((function e(t,r,c){var s,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(Y.b)(r,f.decimals),o("Withdrawing ".concat(r," ").concat(Object(Y.d)(b.mint)," to ").concat(t.toString()),{variant:"info"}),e.next=4,Object(k.a)(w.a.mark((function e(){var n,r,o,u,d,m,b,f,v,x;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.c)(a.programId,p,g);case 2:if(n=e.sent,!c){e.next=47;break}return r=a.coder.instruction.encode("withdraw_locked",{amount:s}),o=h[t.toString()],e.next=8,Object(T.c)(a.programId,p,g);case 8:return u=e.sent.publicKey,e.next=11,st(i.programId,t);case 11:return d=e.sent.publicKey,e.next=14,a.state.address();case 14:return e.t0=e.sent,e.t1={pubkey:e.t0,isWritable:!1,isSigner:!1},e.t2={pubkey:p,isWritable:!1,isSigner:!1},e.t3={pubkey:g,isWritable:!1,isSigner:!1},e.t4={pubkey:a.provider.wallet.publicKey,isWritable:!1,isSigner:!0},m=[e.t1,e.t2,e.t3,e.t4],e.t5=i.rpc,e.t6=r,e.next=24,i.state.address();case 24:return e.t7=e.sent,e.t8=a.provider.wallet.publicKey,e.t9=a.programId,e.t10=t,e.t11=o.vault,e.t12=d,e.t13=ze.TokenInstructions.TOKEN_PROGRAM_ID,e.t14=j.balancesLocked.vault,e.t15=u,e.t16={lockup:e.t7,beneficiary:e.t8,whitelistedProgram:e.t9,vesting:e.t10,vault:e.t11,vestingSigner:e.t12,tokenProgram:e.t13,whitelistedProgramVault:e.t14,whitelistedProgramVaultAuthority:e.t15},e.t17={transfer:e.t16},e.t18=m,e.t19={accounts:e.t17,remainingAccounts:e.t18},e.next=39,e.t5.whitelistDeposit.call(e.t5,e.t6,e.t19);case 39:return b=e.sent,e.next=42,i.account.vesting(t);case 42:return f=e.sent,l({type:y.a.LockupUpdateVesting,item:{vesting:{publicKey:t,account:f}}}),e.abrupt("return",b);case 47:return e.next=49,a.rpc.withdraw(s,{accounts:{registrar:p,member:g,beneficiary:a.provider.wallet.publicKey,vault:j.balances.vault,memberSigner:n.publicKey,depositor:t,tokenProgram:ze.TokenInstructions.TOKEN_PROGRAM_ID}});case 49:return v=e.sent,e.next=52,Object(C.getTokenAccount)(a.provider,t);case 52:return x=e.sent,l({type:y.a.CommonOwnedTokenAccountsUpdate,item:{account:{publicKey:t,account:x}}}),e.abrupt("return",v);case 55:case"end":return e.stop()}}),e)})))();case 4:d=e.sent,u(),o("Withdraw complete",{variant:"success",action:Object(A.jsx)(Fe.a,{signature:d})}),n();case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()})}function Wt(e){var t=Object(s.c)((function(e){var t=e.accounts[e.registry.registrar.toString()];return{mint:t?t.mint:void 0,mintAccount:e.accounts[t.mint.toString()]}})),n=t.mint,r=t.mintAccount,i=Object(d.b)().enqueueSnackbar,c=e.open,o=e.onClose,u=e.onTransfer,l=e.title,m=e.contextText,p=e.deposit,b=Object(a.useState)(null),g=Object(G.a)(b,2),j=g[0],y=g[1],f=Object(a.useState)(null),h=Object(G.a)(f,2),v=h[0],x=h[1],O=Object(a.useState)(null),w=Object(G.a)(O,2),k=w[0],S=w[1],K=Object(a.useState)(null),M=Object(G.a)(K,2),C=M[0],P=M[1],T=Object(a.useState)(!1),R=Object(G.a)(T,2),W=R[0],E=R[1],L=(W?!k:!v)||!j||!C||j>C;return Object(A.jsx)("div",{children:Object(A.jsxs)(Ae.a,{open:c,TransitionComponent:Et,keepMounted:!0,onClose:o,fullWidth:!0,children:[Object(A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(A.jsx)(Ee.a,{children:l}),Object(A.jsxs)("div",{style:{display:"flex",paddingRight:"24px"},children:[Object(A.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(A.jsx)(Se.a,{})}),Object(A.jsx)(Ne.a,{style:{marginLeft:"0px",marginRight:"0px"},control:Object(A.jsx)(_e.a,{checked:W,onChange:function(){return E(!W)}}),label:""})]})]}),Object(A.jsxs)(We.a,{children:[Object(A.jsx)("div",{style:{display:"flex"},children:Object(A.jsxs)("div",{style:{flex:1},children:[Object(A.jsx)(Le.a,{style:{width:"100%"},id:"outlined-number",label:"Amount",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return y(parseFloat(e.target.value))},InputProps:{inputProps:{min:0,max:null!==C&&void 0!==C?C:0}}}),Object(A.jsx)(Be.a,{children:m})]})}),Object(A.jsx)(Ie.a,{fullWidth:!0,children:W?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Mt,{variant:"outlined",mint:n,decimals:r.decimals,deposit:p,onChange:function(e,t){S(e),P(t.toNumber())}}),Object(A.jsxs)(Be.a,{children:["Vesting account to transfer to/from your ",Object(A.jsx)("b",{children:"locked"})," ","balances"]})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(qe.a,{variant:"outlined",decimals:r.decimals,mint:n,onChange:function(e,t){x(e),P(Math.pow(2,53))}}),Object(A.jsx)(Be.a,{children:"Token account to transfer to/from"})]})})]}),Object(A.jsxs)(Re.a,{children:[Object(A.jsx)(X.a,{onClick:o,color:"primary",children:"Cancel"}),Object(A.jsx)(X.a,{onClick:function(){u(W?k:v,j,W).catch((function(e){console.error(e),i("Error transferring funds: ".concat(e.toString()),{variant:"error"})}))},color:"primary",disabled:L,children:l})]})]})})}!function(e){e[e.Unlocked=0]="Unlocked",e[e.Locked=1]="Locked"}(lt||(lt={})),function(e){e[e.Me=0]="Me",e[e.Stake=1]="Stake",e[e.Rewards=2]="Rewards",e[e.Lockup=3]="Lockup"}(mt||(mt={}));var Et=i.a.forwardRef((function(e,t){return Object(A.jsx)(De.a,Object(j.a)({direction:"up",ref:t},e))}));function Lt(){return Object(A.jsx)(Pt,{})}var It=function(){var e=Object(b.a)({palette:{background:{default:"rgb(255,255,255)"}},typography:{fontFamily:["Source Sans Pro","sans-serif"].join(",")},overrides:{}});return Object(A.jsx)(s.a,{store:v,children:Object(A.jsxs)(m.a,{theme:e,children:[Object(A.jsx)(p.a,{}),Object(A.jsx)(d.a,{maxSnack:5,autoHideDuration:8e3,children:Object(A.jsx)(Y.a,{children:Object(A.jsx)(x.a,{children:Object(A.jsx)(R,{children:Object(A.jsx)(u.a,{basename:"/",children:Object(A.jsxs)(fe,{children:[Object(A.jsx)(l.a,{exact:!0,path:"/",component:Lt}),Object(A.jsx)(l.a,{exact:!0,path:"/stake",component:Lt})]})})})})})})]})})},Dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,698)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};o.a.render(Object(A.jsx)(i.a.StrictMode,{children:Object(A.jsx)(It,{})}),document.getElementById("root")),Dt()},66:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n(1),a=n.n(r),i=n(5),c=(n(0),n(24)),o=n(209),s=n(2);function u(e,t,n,r){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(a.a.mark((function e(t,n,r,i){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.enqueueSnackbar(n,{variant:"info"}),e.prev=1,e.next=4,i();case 4:c=e.sent,t.closeSnackbar(),t.enqueueSnackbar(r,{variant:"success",action:Object(s.jsx)(d,{signature:c})}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.enqueueSnackbar("Error: ".concat(e.t0.toString()),{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function d(e){var t=e.signature,n=Object(c.c)((function(e){return{explorerClusterSuffix:e.common.network.explorerClusterSuffix}})).explorerClusterSuffix,r="?cluster=".concat(n);return Object(s.jsx)(o.a,{color:"inherit",component:"a",target:"_blank",rel:"noopener",href:"https://explorer.solana.com/tx/".concat(t)+r,children:"View on Solana Explorer"})}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),a={mainnet:{label:"Mainnet Beta",url:"https://api.mainnet-beta.solana.com",explorerClusterSuffix:"",srmFaucet:null,msrmFaucet:null,registryProgramId:new r.PublicKey("GrAkKfEpTKQuVHG2Y97Y2FF4i7y7Q5AHLK94JBy7Y5yv"),lockupProgramId:new r.PublicKey("6ebQNeTPZ1j7k3TtkCCtEPRvG7GQsucQrZ7sSEDQi9Ks"),multisigProgramId:new r.PublicKey("3S6ALMCGVib4X3vVR3CLpm2K6Ng5qbWFYMTo5jfxWcEq"),registrars:{srm:new r.PublicKey("5vJRzKtcp4fJxqmR7qzajkaKSiAb6aT9grRsaZKXU222"),msrm:new r.PublicKey("7uURiX2DwCpRuMFebKSkFtX9v5GK1Cd8nWLL8tyoyxZY"),fida:new r.PublicKey("5C2ayX1E2SJ5kKEmDCA9ue9eeo3EPR34QFrhyzbbs3qh"),dxl:new r.PublicKey("BQtp3xGPTFXJSt1MVKxtVSefRcBWmUkzTNM3g1t9efcK")},mints:{srm:new r.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),msrm:new r.PublicKey("MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L"),fida:new r.PublicKey("EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp"),dxl:new r.PublicKey("GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z")}},devnet:{label:"Devnet",url:"https://api.devnet.solana.com",explorerClusterSuffix:"devnet",srmFaucet:null,msrmFaucet:null,multisigProgramId:new r.PublicKey("9z7Pq56To96qbVLzuBcf47Lc7u8uUWZh6k5rhcaTsDjz"),registryProgramId:new r.PublicKey("65aMavjMw3EhmWKVCkGn1Uj2SqZ3XY4coJhYM1BVJTHw"),lockupProgramId:new r.PublicKey("bRGMWZz4mzJ8NG8csn5QNTbJDv2973QSvppbfcAboje"),registrars:{token1:new r.PublicKey("EqbwcuvPWLZ5fav58HrieHmJEqTm6RPu5bmn5bBQJ3mu"),token2:new r.PublicKey("2rDWuS6yVFQ3jYx1nQq7gs3HgzWLJcUwm9sTUBWuXuyK")},mints:{token1:new r.PublicKey("Ep6ASaHQ4gKiN3gWNRKYttZEQ7b82seMk9HWc5JNBJZP"),token2:new r.PublicKey("5vWxJthWbCFuNSZj1qcP9WoU8E6UG3DUfeAoPvYoN8PQ")}},localhost:{label:"Localhost",url:"http://localhost:8899",explorerClusterSuffix:"localhost",srmFaucet:null,msrmFaucet:null,multisigProgramId:new r.PublicKey("9z7Pq56To96qbVLzuBcf47Lc7u8uUWZh6k5rhcaTsDjz"),registryProgramId:new r.PublicKey("A3ukM9swAsTqVC6g5Zy9FsWXofe5f2JhXMEfzenNf9Q7"),lockupProgramId:new r.PublicKey("2z65xTKJDM4iJBVz5aXtNrWfQvKGgNJvnqY1GL2mkimu"),registrars:{token1:new r.PublicKey("Fwi5pie2VgWTDUSRNkca1HdFCke5r3v3mY83JbxtC3CJ"),token2:new r.PublicKey("9kCGBWgHzGGChvmAsmu5jrXwEShZfLxKRTmKdxEpFUBr")},mints:{token1:new r.PublicKey("2aE1pietadYMeDtdqKayS4SVo9W4xtC3U7SN4iGWCVcX"),token2:new r.PublicKey("Cgan7PWyBH6Z7JNA6f9kDYgwBMZBxRexpdd29PJgnqah")}}}}},[[630,1,2]]]);
//# sourceMappingURL=main.adbd355c.chunk.js.map